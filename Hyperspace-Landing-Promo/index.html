<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hyperspace — LiDAR-Powered Spatial Intelligence Platform</title>
    <meta name="description" content="Enterprise spatial analytics powered by LiDAR — real-time people tracking, zone analytics, and DOOH attribution. No cameras. Privacy-first.">
    <meta name="keywords" content="LiDAR analytics, spatial intelligence, people tracking, foot traffic analytics, retail analytics, zone analytics, heatmap, dwell time, visitor flow, planogram, shelf analytics, DOOH attribution, digital out-of-home, privacy-first tracking, anonymous tracking, no cameras, real-time analytics, 3D venue, point cloud, occupancy analytics, queue management, store optimization, spatial analytics platform">
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    <meta name="author" content="Hyperspace">
    <meta name="msvalidate.01" content="A297767D95AB6579E4AF83D8B13ED050" />
    <link rel="canonical" href="https://www.hyspace.app/">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.hyspace.app/">
    <meta property="og:title" content="Hyperspace — LiDAR-Powered Spatial Intelligence Platform">
    <meta property="og:description" content="Turn physical space into intelligent space. Real-time people tracking, zone analytics, and advertising attribution — all powered by LiDAR, all without cameras.">
    <meta property="og:image" content="https://www.hyspace.app/hyperspace-1.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:site_name" content="Hyperspace">
    <meta property="og:locale" content="en_US">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Hyperspace — LiDAR-Powered Spatial Intelligence">
    <meta name="twitter:description" content="Turn physical space into intelligent space. Real-time people tracking, zone analytics, and DOOH attribution — powered by LiDAR, without cameras.">
    <meta name="twitter:image" content="https://www.hyspace.app/hyperspace-1.png">

    <!-- Geo / Local SEO -->
    <meta name="geo.region" content="US">
    <meta name="geo.placename" content="Global">
    <meta name="geo.position" content="37.7749;-122.4194">
    <meta name="ICBM" content="37.7749, -122.4194">

    <!-- Structured Data: Organization -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "Hyperspace",
      "url": "https://www.hyspace.app",
      "logo": "https://www.hyspace.app/hyperspace-logo.png",
      "description": "Enterprise-grade spatial analytics platform using LiDAR to transform physical spaces into actionable intelligence.",
      "sameAs": [],
      "contactPoint": {
        "@type": "ContactPoint",
        "contactType": "sales",
        "email": "info@hyspace.app"
      }
    }
    </script>

    <!-- Structured Data: SoftwareApplication -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "Hyperspace Spatial Intelligence Platform",
      "applicationCategory": "BusinessApplication",
      "operatingSystem": "Web",
      "description": "LiDAR-powered spatial analytics: real-time people tracking, zone analytics, planogram management, DOOH attribution, and behavioral clustering — all without cameras.",
      "offers": {
        "@type": "Offer",
        "price": "434",
        "priceCurrency": "USD",
        "priceValidUntil": "2027-12-31",
        "description": "Full OPEX monthly pricing for a standard venue (4 LiDARs). Includes hardware, analytics, and support. Zero Capex. 36-month contract."
      },
      "featureList": [
        "Real-time anonymous people tracking",
        "3D venue builder with DWG import",
        "Zone analytics with occupancy and dwell time",
        "Planogram builder with SKU tracking",
        "DOOH screen attribution (PEBLE engine)",
        "Behavioral clustering and replay",
        "Edge commissioning portal",
        "Privacy-first — no cameras, no PII"
      ],
      "screenshot": "https://www.hyspace.app/hyperspace-1.png"
    }
    </script>

    <!-- Structured Data: FAQPage (boosts rich snippets) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "What is Hyperspace?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Hyperspace is an enterprise-grade spatial analytics platform that uses LiDAR sensors to track anonymous human movement in physical spaces. It provides real-time zone analytics, planogram management, DOOH attribution, and behavioral clustering — all without cameras."
          }
        },
        {
          "@type": "Question",
          "name": "How does LiDAR tracking work without cameras?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "LiDAR sensors emit laser pulses to create 3D point clouds of a space. People are detected as anonymous moving clusters of points — no images, no faces, no personally identifiable information. This makes it fully GDPR and privacy compliant."
          }
        },
        {
          "@type": "Question",
          "name": "How many LiDAR sensors do I need for my venue?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Each Ulisse LiDAR covers approximately 530 sqm with a 15m range and 360° field of view. Use the Hyperspace configurator to get an instant estimate based on your venue dimensions and type."
          }
        },
        {
          "@type": "Question",
          "name": "What is PEBLE attribution?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "PEBLE (Post-Exposure Behavioral Lift Engine) measures the real-world impact of digital out-of-home (DOOH) advertising by tracking whether people who saw a screen display changed their shopping behavior — such as visiting a specific aisle or picking up a product."
          }
        },
        {
          "@type": "Question",
          "name": "How much does Hyperspace cost?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Hyperspace offers two pricing models: Full OPEX (zero upfront, everything included in a monthly fee) and Hybrid (hardware purchase upfront with a lower monthly software fee). Use the configurator for an instant quote based on your venue size."
          }
        }
      ]
    }
    </script>

    <link rel="stylesheet" crossorigin href="./assets/index-aanLIwpg.css">
    <link rel="icon" type="image/png" href="./hyperspace-logo.png">
    <link rel="apple-touch-icon" href="./hyperspace-logo.png">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <style>
      :root {
        --hs-bg: #0a0f1a;
        --hs-bg-light: #111827;
        --hs-bg-card: #1e293b;
        --hs-blue: #3b82f6;
        --hs-purple: #8b5cf6;
        --hs-green: #22c55e;
        --hs-orange: #f59e0b;
        --hs-cyan: #06b6d4;
        --hs-text: #f8fafc;
        --hs-text-muted: #94a3b8;
      }
      * { margin: 0; padding: 0; box-sizing: border-box; }
      html { scroll-behavior: smooth; }
      body {
        font-family: 'Inter', system-ui, -apple-system, sans-serif;
        background: var(--hs-bg);
        color: var(--hs-text);
        -webkit-font-smoothing: antialiased;
        overflow-x: hidden;
      }

      /* Reuse existing design tokens */
      .gradient-text {
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
        background-image: linear-gradient(135deg, var(--hs-blue) 0%, var(--hs-purple) 100%);
      }
      .card-glass {
        background: #1e293b99;
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        border: 1px solid rgba(255,255,255,.08);
      }

      /* Animations */
      @keyframes fadeInUp {
        from { opacity: 0; transform: translateY(30px); }
        to { opacity: 1; transform: translateY(0); }
      }
      @keyframes float {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-10px); }
      }
      @keyframes pulseGlow {
        0%, 100% { box-shadow: 0 0 20px rgba(59,130,246,0.3); }
        50% { box-shadow: 0 0 40px rgba(139,92,246,0.5); }
      }
      @keyframes shimmer {
        0% { transform: translateX(-100%) skewX(-15deg); }
        100% { transform: translateX(200%) skewX(-15deg); }
      }
      @keyframes sidebar-hue { from { filter: hue-rotate(0deg); } to { filter: hue-rotate(-360deg); } }
      .sidebar-gradient-text {
        font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
        font-weight: 400;
        letter-spacing: 0.15em;
        text-transform: uppercase;
        color: #ff7b47;
        background-image: linear-gradient(92deg, #ff7b47, #ffcc5c);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        animation: sidebar-hue 10s infinite linear;
      }
      @keyframes countUp { from { opacity: 0; } to { opacity: 1; } }

      .reveal {
        opacity: 0;
        transform: translateY(30px);
        transition: opacity 0.8s ease, transform 0.8s ease;
      }
      .reveal.visible {
        opacity: 1;
        transform: translateY(0);
      }
      .reveal-delay-1 { transition-delay: 0.1s; }
      .reveal-delay-2 { transition-delay: 0.2s; }
      .reveal-delay-3 { transition-delay: 0.3s; }
      .reveal-delay-4 { transition-delay: 0.4s; }

      /* Section styles */
      .section { padding: 6rem 1.5rem; position: relative; }
      .section-dark { background: var(--hs-bg); }
      .section-darker { background: #060a12; }
      .section-alt { background: var(--hs-bg-light); }
      .container { max-width: 1280px; margin: 0 auto; }

      /* GIF showcase */
      .vid-showcase {
        border-radius: 16px;
        overflow: hidden;
        border: 1px solid rgba(255,255,255,0.08);
        box-shadow: 0 25px 50px rgba(0,0,0,0.5);
        position: relative;
      }
      .vid-showcase::after {
        content: '';
        position: absolute;
        inset: 0;
        border-radius: 16px;
        pointer-events: none;
        box-shadow: inset 0 1px 0 rgba(255,255,255,0.1);
      }
      .vid-showcase video, .vid-showcase img {
        width: 100%;
        display: block;
      }

      /* Gallery card with play button */
      .gallery-card { cursor:pointer; position:relative; }
      .gallery-card .play-overlay {
        position:absolute; inset:0; display:flex; align-items:center; justify-content:center;
        background:rgba(0,0,0,0.25); opacity:0.8; transition:opacity 0.3s; border-radius:16px; z-index:2;
      }
      .gallery-card:hover .play-overlay { opacity:1; }
      .gallery-card .play-overlay svg { width:48px; height:48px; color:white; filter:drop-shadow(0 2px 8px rgba(0,0,0,0.5)); }

      /* Video Modal */
      .video-modal {
        display:none; position:fixed; inset:0; z-index:9999;
        background:rgba(0,0,0,0.85); backdrop-filter:blur(8px);
        align-items:center; justify-content:center; padding:2rem;
      }
      .video-modal.active { display:flex; }
      .video-modal-inner { position:relative; max-width:960px; width:100%; border-radius:16px; overflow:hidden; background:#000; }
      .video-modal-inner video { width:100%; display:block; }
      .video-modal-close {
        position:absolute; top:12px; right:12px; z-index:10;
        width:36px; height:36px; border-radius:50%; border:none;
        background:rgba(0,0,0,0.6); color:white; cursor:pointer;
        display:flex; align-items:center; justify-content:center;
        transition:background 0.2s;
      }
      .video-modal-close:hover { background:rgba(255,255,255,0.2); }

      /* Lead form */
      .lead-form { display:flex; gap:0.75rem; max-width:480px; margin:0 auto; flex-wrap:wrap; }
      .lead-form input[type=email] {
        flex:1; min-width:220px; padding:0.875rem 1.25rem; border-radius:9999px;
        border:1px solid rgba(255,255,255,0.15); background:rgba(255,255,255,0.05);
        color:var(--hs-text); font-size:1rem; font-family:inherit; outline:none;
        transition:border-color 0.2s;
      }
      .lead-form input[type=email]:focus { border-color:var(--hs-blue); }
      .lead-form input[type=email]::placeholder { color:var(--hs-text-muted); }
      .lead-form .btn-primary { white-space:nowrap; }
      .lead-success { display:none; color:var(--hs-green); font-size:0.9375rem; margin-top:1rem; }
      .lead-success.show { display:flex; align-items:center; justify-content:center; gap:0.5rem; }

      /* ===== CONFIGURATOR WIZARD ===== */
      .cfg-section { background: var(--hs-bg); }
      .cfg-wrap { max-width:900px; margin:0 auto; scroll-margin-top:80px; }
      .cfg-progress { display:flex; align-items:flex-start; justify-content:center; gap:0; margin-bottom:2.5rem; }
      .cfg-progress .cfg-step-dot {
        width:40px; height:40px; border-radius:50%; display:flex; align-items:center; justify-content:center;
        font-size:0.875rem; font-weight:700; border:2px solid var(--hs-bg-card); color:var(--hs-text-muted);
        background:var(--hs-bg-card); transition:all 0.3s; cursor:pointer; flex-shrink:0;
      }
      .cfg-progress .cfg-step-dot:hover { border-color:rgba(59,130,246,0.5); }
      .cfg-progress .cfg-step-dot.active { border-color:var(--hs-blue); color:white; background:var(--hs-blue); box-shadow:0 0 0 4px rgba(59,130,246,0.2); }
      .cfg-progress .cfg-step-dot.done { border-color:var(--hs-green); color:white; background:var(--hs-green); cursor:pointer; }
      .cfg-progress .cfg-step-dot.done:hover { box-shadow:0 0 0 4px rgba(34,197,94,0.2); }
      .cfg-progress .cfg-step-line { width:48px; height:3px; border-radius:2px; background:var(--hs-bg-card); transition:background 0.3s; margin-top:18px; flex-shrink:0; }
      .cfg-progress .cfg-step-line.done { background:linear-gradient(90deg, var(--hs-green), var(--hs-green)); }
      .cfg-progress .cfg-step-line.active { background:linear-gradient(90deg, var(--hs-green), var(--hs-blue)); }
      .cfg-progress .cfg-step-label { font-size:0.6875rem; color:var(--hs-text-muted); margin-top:0.5rem; text-align:center; transition:color 0.3s; }
      .cfg-progress .cfg-step-wrap { display:flex; flex-direction:column; align-items:center; cursor:pointer; }
      .cfg-progress .cfg-step-wrap:hover .cfg-step-label { color:var(--hs-text); }
      .cfg-progress .cfg-step-dot.active + .cfg-step-label { color:var(--hs-blue); font-weight:600; }
      .cfg-progress .cfg-step-dot.done + .cfg-step-label { color:var(--hs-green); }
      .cfg-panel { display:none; }
      .cfg-panel.active { display:block; animation: cfgFadeIn 0.3s ease; }
      @keyframes cfgFadeIn { from { opacity:0; transform:translateY(12px); } to { opacity:1; transform:translateY(0); } }
      .cfg-tabs { display:flex; gap:0; margin-bottom:1.5rem; border-bottom:1px solid rgba(255,255,255,0.08); }
      .cfg-tab {
        padding:0.75rem 1.25rem; cursor:pointer; font-size:0.875rem; font-weight:500;
        color:var(--hs-text-muted); border-bottom:2px solid transparent; transition:all 0.2s;
        background:none; border-top:none; border-left:none; border-right:none;
      }
      .cfg-tab.active { color:var(--hs-blue); border-bottom-color:var(--hs-blue); }
      .cfg-tab:hover { color:var(--hs-text); }
      .cfg-input-group { display:flex; flex-wrap:wrap; gap:1rem; margin-bottom:1.5rem; }
      .cfg-input-group label { display:flex; flex-direction:column; gap:0.375rem; flex:1; min-width:140px; }
      .cfg-input-group label span { font-size:0.75rem; color:var(--hs-text-muted); font-weight:500; }
      .cfg-input-group input, .cfg-input-group select {
        padding:0.625rem 0.75rem; border-radius:8px; border:1px solid rgba(255,255,255,0.1);
        background:var(--hs-bg-card); color:var(--hs-text); font-size:0.9375rem; font-family:inherit;
        outline:none; transition:border-color 0.2s;
      }
      .cfg-input-group input:focus, .cfg-input-group select:focus { border-color:var(--hs-blue); }
      .cfg-unit-toggle { display:flex; gap:0.5rem; align-items:center; }
      .cfg-unit-toggle button {
        padding:0.375rem 0.75rem; border-radius:6px; font-size:0.8125rem; font-weight:600; cursor:pointer;
        border:1px solid rgba(255,255,255,0.1); background:var(--hs-bg-card); color:var(--hs-text-muted); transition:all 0.2s;
      }
      .cfg-unit-toggle button.active { background:var(--hs-blue); color:white; border-color:var(--hs-blue); }
      .cfg-quick-cards { display:flex; gap:1rem; }
      .cfg-quick-card {
        flex:1; padding:1.5rem 1rem; border-radius:12px; text-align:center; cursor:pointer;
        border:2px solid rgba(255,255,255,0.08); background:var(--hs-bg-card); transition:all 0.2s;
      }
      .cfg-quick-card:hover { border-color:var(--hs-blue); }
      .cfg-quick-card.selected { border-color:var(--hs-blue); background:rgba(59,130,246,0.1); }
      .cfg-quick-card h4 { font-size:1rem; margin-bottom:0.25rem; }
      .cfg-quick-card p { font-size:0.75rem; color:var(--hs-text-muted); }
      .cfg-venue-types { display:grid; grid-template-columns:repeat(5,1fr); gap:1rem; }
      .cfg-venue-type {
        padding:1.25rem; border-radius:12px; text-align:center; cursor:pointer;
        border:2px solid rgba(255,255,255,0.08); background:var(--hs-bg-card); transition:all 0.2s;
      }
      .cfg-venue-type:hover { border-color:var(--hs-blue); }
      .cfg-venue-type.selected { border-color:var(--hs-blue); background:rgba(59,130,246,0.1); }
      .cfg-venue-type .cfg-vt-icon { font-size:1.75rem; margin-bottom:0.5rem; }
      .cfg-venue-type h4 { font-size:0.875rem; margin-bottom:0.25rem; }
      .cfg-venue-type p { font-size:0.6875rem; color:var(--hs-text-muted); }
      .cfg-preview-area { width:100%; aspect-ratio:16/9; background:var(--hs-bg-card); border-radius:12px; border:1px solid rgba(255,255,255,0.06); overflow:hidden; position:relative; max-height:320px; }
      .cfg-preview-area svg { width:100%; height:100%; }
      .cfg-results-grid { display:grid; grid-template-columns:1fr 280px; gap:1.5rem; }
      .cfg-stats { display:grid; grid-template-columns:1fr 1fr; gap:0.75rem; margin-bottom:1rem; }
      .cfg-stat {
        padding:0.875rem; border-radius:10px; background:var(--hs-bg-card); border:1px solid rgba(255,255,255,0.06);
      }
      .cfg-stat .cfg-stat-val { font-size:1.5rem; font-weight:800; color:white; }
      .cfg-stat .cfg-stat-lbl { font-size:0.6875rem; color:var(--hs-text-muted); margin-top:0.125rem; }
      .cfg-toggle-row { display:flex; gap:0.5rem; margin-bottom:1rem; }
      .cfg-toggle-btn {
        flex:1; padding:0.625rem; border-radius:8px; font-size:0.8125rem; font-weight:600; cursor:pointer;
        border:1px solid rgba(255,255,255,0.1); background:var(--hs-bg-card); color:var(--hs-text-muted); transition:all 0.2s;
        text-align:center;
      }
      .cfg-toggle-btn.active { background:var(--hs-blue); color:white; border-color:var(--hs-blue); }
      .cfg-3d-wrap { width:100%; aspect-ratio:16/9; background:#0f0f14; border-radius:12px; overflow:hidden; position:relative; border:1px solid rgba(255,255,255,0.06); max-height:320px; }
      .cfg-3d-wrap canvas { width:100%!important; height:100%!important; display:block; }
      .cfg-3d-badge {
        position:absolute; bottom:12px; left:12px; padding:0.375rem 0.75rem; border-radius:6px;
        background:rgba(0,0,0,0.7); color:var(--hs-text-muted); font-size:0.6875rem; backdrop-filter:blur(8px);
        pointer-events:none; z-index:5;
      }
      .cfg-3d-toolbar {
        position:absolute; top:10px; left:10px; right:10px; display:flex; align-items:center; gap:4px;
        padding:6px 8px; background:rgba(15,15,20,0.85); backdrop-filter:blur(8px);
        border-radius:8px; border:1px solid rgba(255,255,255,0.08); z-index:10;
      }
      .cfg-3d-toolbar button {
        padding:4px 10px; font-size:0.6875rem; font-weight:600; border-radius:6px; border:none;
        background:transparent; color:#9ca3af; cursor:pointer; transition:all 0.15s; font-family:inherit;
      }
      .cfg-3d-toolbar button:hover { background:rgba(255,255,255,0.1); color:white; }
      .cfg-3d-toolbar button.active { background:var(--hs-blue); color:white; }
      .cfg-3d-toolbar .cfg-tb-sep { width:1px; height:20px; background:rgba(255,255,255,0.1); margin:0 4px; flex-shrink:0; }
      .cfg-fp-canvas-wrap {
        width:100%; aspect-ratio:16/10; background:var(--hs-bg-card); border-radius:12px;
        border:2px dashed rgba(255,255,255,0.15); overflow:hidden; position:relative; cursor:crosshair;
        display:flex; align-items:center; justify-content:center;
      }
      .cfg-fp-canvas-wrap.has-image { border-style:solid; border-color:rgba(255,255,255,0.06); }
      .cfg-fp-canvas-wrap canvas { position:absolute; top:0; left:0; width:100%; height:100%; }
      .cfg-fp-drop-zone {
        display:flex; flex-direction:column; align-items:center; gap:0.75rem;
        color:var(--hs-text-muted); cursor:pointer;
      }
      .cfg-fp-drop-zone svg { width:40px; height:40px; opacity:0.4; }
      .cfg-fp-scale-bar {
        display:flex; align-items:center; gap:1rem; margin-top:1rem; padding:0.75rem 1rem;
        background:var(--hs-bg-card); border-radius:10px; border:1px solid rgba(255,255,255,0.06);
      }
      .cfg-fp-scale-bar label { font-size:0.75rem; color:var(--hs-text-muted); font-weight:500; }
      .cfg-fp-scale-bar input {
        width:80px; padding:0.375rem 0.5rem; border-radius:6px; border:1px solid rgba(255,255,255,0.1);
        background:rgba(255,255,255,0.05); color:var(--hs-text); font-size:0.8125rem; font-family:inherit; outline:none;
      }
      .cfg-fp-scale-bar input:focus { border-color:var(--hs-blue); }
      .cfg-fp-hint { font-size:0.6875rem; color:var(--hs-text-muted); margin-top:0.5rem; text-align:center; }
      .cfg-pricing-cards { display:grid; grid-template-columns:1fr 1fr; gap:1.5rem; margin-bottom:2rem; }
      .cfg-price-card {
        padding:2rem; border-radius:16px; border:2px solid rgba(255,255,255,0.08); background:var(--hs-bg-card);
        text-align:center; transition:all 0.2s; cursor:pointer; position:relative;
      }
      .cfg-price-card:hover { border-color:var(--hs-blue); }
      .cfg-price-card.selected { border-color:var(--hs-blue); background:rgba(59,130,246,0.08); }
      .cfg-price-card .cfg-price-tag { font-size:0.6875rem; color:var(--hs-text-muted); text-transform:uppercase; letter-spacing:0.05em; margin-bottom:0.5rem; }
      .cfg-price-card .cfg-price-amount { font-size:2rem; font-weight:800; color:white; }
      .cfg-price-card .cfg-price-period { font-size:0.8125rem; color:var(--hs-text-muted); }
      .cfg-price-card .cfg-price-sub { font-size:0.75rem; color:var(--hs-text-muted); margin-top:0.75rem; line-height:1.5; }
      .cfg-price-card .cfg-recommended {
        position:absolute; top:-12px; left:50%; transform:translateX(-50%);
        padding:0.25rem 0.75rem; border-radius:9999px; background:var(--hs-blue); color:white;
        font-size:0.6875rem; font-weight:700; white-space:nowrap;
      }
      .cfg-lead-form { max-width:480px; margin:0 auto; }
      .cfg-lead-form input {
        width:100%; padding:0.75rem 1rem; border-radius:8px; border:1px solid rgba(255,255,255,0.1);
        background:var(--hs-bg-card); color:var(--hs-text); font-size:0.9375rem; font-family:inherit;
        outline:none; margin-bottom:0.75rem; box-sizing:border-box; transition:border-color 0.2s;
      }
      .cfg-lead-form input:focus { border-color:var(--hs-blue); }
      .cfg-lead-form input::placeholder { color:var(--hs-text-muted); }
      .cfg-nav { display:flex; justify-content:space-between; margin-top:2rem; }
      .cfg-nav .btn-back {
        padding:0.75rem 1.5rem; border-radius:9999px; font-size:0.875rem; font-weight:600; cursor:pointer;
        border:1px solid rgba(255,255,255,0.1); background:transparent; color:var(--hs-text-muted); transition:all 0.2s;
      }
      .cfg-nav .btn-back:hover { color:white; border-color:rgba(255,255,255,0.3); }
      .cfg-summary-bar {
        display:flex; gap:1.5rem; padding:1rem 1.25rem; border-radius:10px;
        background:var(--hs-bg-card); border:1px solid rgba(255,255,255,0.06); margin-bottom:1.5rem; flex-wrap:wrap;
      }
      .cfg-summary-bar .cfg-sb-item { font-size:0.8125rem; color:var(--hs-text-muted); }
      .cfg-summary-bar .cfg-sb-item strong { color:white; }
      /* ===== OUTCOMES STEP ===== */
      .cfg-outcomes-layout { display:grid; grid-template-columns:1fr 1fr; gap:1.5rem; }
      .cfg-outcomes-grid { display:grid; grid-template-columns:1fr 1fr; gap:0.75rem; }
      .cfg-outcome-card {
        padding:0.875rem 1rem; border-radius:12px; cursor:pointer; transition:all 0.2s;
        border:2px solid rgba(255,255,255,0.08); background:var(--hs-bg-card); position:relative; user-select:none;
      }
      .cfg-outcome-card:hover { border-color:rgba(59,130,246,0.4); }
      .cfg-outcome-card.active { border-color:var(--hs-blue); background:rgba(59,130,246,0.08); }
      .cfg-outcome-card .cfg-oc-icon { margin-bottom:0.25rem; color:var(--hs-blue); }
      .cfg-outcome-card .cfg-oc-icon svg { width:20px; height:20px; }
      .cfg-outcome-card.active .cfg-oc-icon { color:white; }
      .cfg-outcome-card .cfg-oc-label { font-size:0.8125rem; font-weight:600; color:white; margin-bottom:0.125rem; }
      .cfg-outcome-card .cfg-oc-desc { font-size:0.6875rem; color:var(--hs-text-muted); line-height:1.4; }
      .cfg-outcome-card .cfg-oc-badge {
        position:absolute; top:8px; right:8px; padding:2px 8px; border-radius:9999px;
        font-size:0.5625rem; font-weight:700; text-transform:uppercase; letter-spacing:0.05em;
      }
      .cfg-oc-badge.base { background:rgba(34,197,94,0.15); color:var(--hs-green); }
      .cfg-oc-badge.advanced { background:rgba(139,92,246,0.15); color:#a78bfa; }
      .cfg-outcome-card .cfg-oc-check {
        position:absolute; top:8px; left:8px; width:18px; height:18px; border-radius:50%;
        border:2px solid rgba(255,255,255,0.15); display:flex; align-items:center; justify-content:center;
        transition:all 0.2s; font-size:0.625rem; color:transparent;
      }
      .cfg-outcome-card.active .cfg-oc-check { background:var(--hs-blue); border-color:var(--hs-blue); color:white; }
      .cfg-outcomes-3d { border-radius:12px; overflow:hidden; position:relative; background:#0f0f14; border:1px solid rgba(255,255,255,0.06); min-height:300px; }
      .cfg-outcomes-3d canvas { width:100%!important; height:100%!important; display:block; }
      .cfg-outcomes-3d .cfg-o3d-badge {
        position:absolute; bottom:8px; left:8px; right:8px; padding:0.375rem 0.75rem; border-radius:6px;
        background:rgba(0,0,0,0.7); backdrop-filter:blur(8px); font-size:0.625rem; color:var(--hs-text-muted);
        pointer-events:none; z-index:5; text-align:center;
      }
      .cfg-outcomes-hint { text-align:center; font-size:0.6875rem; color:var(--hs-text-muted); margin-top:0.75rem; opacity:0.7; }
      .cfg-outcomes-reset {
        background:none; border:1px solid rgba(255,255,255,0.1); color:var(--hs-text-muted);
        padding:0.375rem 0.75rem; border-radius:6px; font-size:0.6875rem; cursor:pointer; transition:all 0.2s;
      }
      .cfg-outcomes-reset:hover { border-color:rgba(255,255,255,0.3); color:white; }
      .cfg-tier-label {
        display:inline-flex; align-items:center; gap:0.375rem; padding:0.375rem 0.75rem; border-radius:9999px;
        font-size:0.75rem; font-weight:600;
      }
      .cfg-tier-label.core { background:rgba(34,197,94,0.12); color:var(--hs-green); }
      .cfg-tier-label.pro { background:rgba(139,92,246,0.12); color:#a78bfa; }
      @media (max-width: 768px) {
        .cfg-venue-types { grid-template-columns: repeat(3, 1fr); }
        .cfg-results-grid { grid-template-columns: 1fr; }
        .cfg-pricing-cards { grid-template-columns: 1fr; }
        .cfg-quick-cards { flex-direction: column; }
        .cfg-outcomes-layout { grid-template-columns: 1fr; }
        .cfg-outcomes-grid { grid-template-columns: 1fr; }
      }

      /* Lucide icon sizing in cards */
      .value-card .card-icon svg { width:24px; height:24px; }
      .feature-list li .icon svg { width:12px; height:12px; }

      /* Header */
      .site-header {
        position: fixed;
        top: 0; left: 0; right: 0;
        z-index: 100;
        backdrop-filter: blur(16px);
        -webkit-backdrop-filter: blur(16px);
        background: rgba(10,15,26,0.8);
        border-bottom: 1px solid rgba(255,255,255,0.06);
      }
      .site-header .inner {
        width: 100%;
        margin: 0;
        padding: 0.25rem 1.25rem;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }
      .site-header .logo {
        display: flex;
        align-items: center;
        gap: 0.4rem;
        text-decoration: none;
      }
      .site-header .logo img { height: 46px; width: 46px; object-fit: contain; position: relative; top: 2px; }
      .site-header .logo span { font-size: 1.25rem; line-height: 40px; }
      .site-header nav { display: flex; gap: 2rem; align-items: center; }
      .site-header nav a {
        color: var(--hs-text-muted);
        text-decoration: none;
        font-size: 0.875rem;
        font-weight: 500;
        transition: color 0.2s;
      }
      .site-header nav a:hover { color: var(--hs-text); }
      .site-header nav a.btn-primary { color: white; }
      .btn-primary {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.625rem 1.5rem;
        background: linear-gradient(135deg, var(--hs-blue), var(--hs-purple));
        color: white;
        border: none;
        border-radius: 9999px;
        font-size: 0.875rem;
        font-weight: 600;
        cursor: pointer;
        text-decoration: none;
        transition: transform 0.2s, box-shadow 0.2s;
      }
      .btn-primary:hover {
        transform: translateY(-1px);
        box-shadow: 0 8px 25px rgba(59,130,246,0.4);
      }
      .btn-outline {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.625rem 1.5rem;
        background: transparent;
        color: var(--hs-text);
        border: 1px solid rgba(255,255,255,0.15);
        border-radius: 9999px;
        font-size: 0.875rem;
        font-weight: 600;
        cursor: pointer;
        text-decoration: none;
        transition: border-color 0.2s, background 0.2s;
      }
      .btn-outline:hover {
        border-color: var(--hs-blue);
        background: rgba(59,130,246,0.05);
      }

      /* Hero */
      .hero {
        min-height: 100vh;
        display: flex;
        align-items: center;
        padding-top: 5rem;
        position: relative;
        overflow: hidden;
      }
      .hero-grid-bg {
        position: absolute;
        inset: 0;
        background-image:
          linear-gradient(180deg, rgba(59,130,246,0.08) 1px, transparent 1px),
          linear-gradient(90deg, rgba(139,92,246,0.08) 1px, transparent 1px);
        background-size: 60px 60px;
        mask-image: radial-gradient(ellipse at center, black 30%, transparent 70%);
        -webkit-mask-image: radial-gradient(ellipse at center, black 30%, transparent 70%);
      }
      .hero .orb-1 {
        position: absolute;
        top: 15%;
        left: 10%;
        width: 500px;
        height: 500px;
        background: radial-gradient(circle, rgba(59,130,246,0.15) 0%, transparent 70%);
        border-radius: 50%;
        filter: blur(60px);
      }
      .hero .orb-2 {
        position: absolute;
        bottom: 10%;
        right: 5%;
        width: 400px;
        height: 400px;
        background: radial-gradient(circle, rgba(139,92,246,0.12) 0%, transparent 70%);
        border-radius: 50%;
        filter: blur(60px);
      }

      /* Stats */
      .stat-card {
        text-align: center;
        padding: 2rem;
      }
      .stat-card .number {
        font-size: 2.5rem;
        font-weight: 800;
        line-height: 1;
      }
      .stat-card .label {
        font-size: 0.875rem;
        color: var(--hs-text-muted);
        margin-top: 0.5rem;
      }

      /* Feature Rows */
      .feature-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 4rem;
        align-items: center;
      }
      .feature-row.reverse { direction: rtl; }
      .feature-row.reverse > * { direction: ltr; }
      .feature-text .badge {
        display: inline-flex;
        align-items: center;
        gap: 0.375rem;
        padding: 0.375rem 1rem;
        border-radius: 9999px;
        font-size: 0.75rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        margin-bottom: 1rem;
      }
      .badge-blue { background: rgba(59,130,246,0.15); color: var(--hs-blue); border: 1px solid rgba(59,130,246,0.25); }
      .badge-purple { background: rgba(139,92,246,0.15); color: var(--hs-purple); border: 1px solid rgba(139,92,246,0.25); }
      .badge-green { background: rgba(34,197,94,0.15); color: var(--hs-green); border: 1px solid rgba(34,197,94,0.25); }
      .badge-orange { background: rgba(245,158,11,0.15); color: var(--hs-orange); border: 1px solid rgba(245,158,11,0.25); }
      .badge-cyan { background: rgba(6,182,212,0.15); color: var(--hs-cyan); border: 1px solid rgba(6,182,212,0.25); }
      .feature-text h2 {
        font-size: 2.25rem;
        font-weight: 800;
        line-height: 1.15;
        margin-bottom: 1rem;
      }
      .feature-text p {
        color: var(--hs-text-muted);
        font-size: 1.0625rem;
        line-height: 1.7;
        margin-bottom: 1.5rem;
      }
      .feature-list {
        list-style: none;
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
      }
      .feature-list li {
        display: flex;
        align-items: flex-start;
        gap: 0.75rem;
        color: var(--hs-text-muted);
        font-size: 0.9375rem;
      }
      .feature-list li .icon {
        flex-shrink: 0;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.7rem;
        margin-top: 2px;
      }
      .icon-blue { background: rgba(59,130,246,0.2); color: var(--hs-blue); }
      .icon-green { background: rgba(34,197,94,0.2); color: var(--hs-green); }
      .icon-purple { background: rgba(139,92,246,0.2); color: var(--hs-purple); }
      .icon-orange { background: rgba(245,158,11,0.2); color: var(--hs-orange); }

      /* Value Props Grid */
      .value-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 1.5rem;
      }
      .value-card {
        padding: 2rem;
        border-radius: 16px;
        transition: transform 0.3s, border-color 0.3s;
      }
      .value-card:hover {
        transform: translateY(-4px);
        border-color: rgba(59,130,246,0.3) !important;
      }
      .value-card .card-icon {
        width: 48px;
        height: 48px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.25rem;
        margin-bottom: 1.25rem;
      }
      .value-card h3 { font-size: 1.125rem; font-weight: 700; margin-bottom: 0.5rem; }
      .value-card p { font-size: 0.875rem; color: var(--hs-text-muted); line-height: 1.6; }

      /* PEBLE Flow */
      .peble-flow {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        flex-wrap: wrap;
        margin: 2.5rem 0;
      }
      .peble-step {
        text-align: center;
        padding: 1.25rem;
        min-width: 130px;
      }
      .peble-step .step-icon {
        width: 56px;
        height: 56px;
        border-radius: 16px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        margin: 0 auto 0.75rem;
      }
      .peble-step .step-title { font-weight: 700; font-size: 0.875rem; margin-bottom: 0.25rem; }
      .peble-step .step-desc { font-size: 0.75rem; color: var(--hs-text-muted); }
      .peble-arrow { color: var(--hs-text-muted); font-size: 1.25rem; }

      /* Metrics Row */
      .metrics-row {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 1rem;
        margin-top: 2rem;
      }
      .metric-card {
        padding: 1.5rem;
        border-radius: 12px;
        text-align: center;
      }
      .metric-card .metric-value { font-size: 2rem; font-weight: 800; }
      .metric-card .metric-label { font-size: 0.75rem; color: var(--hs-text-muted); margin-top: 0.25rem; }
      .metric-card .metric-name { font-size: 0.8125rem; font-weight: 600; margin-top: 0.5rem; }

      /* Personas */
      .persona-tabs {
        display: flex;
        gap: 0.5rem;
        margin-bottom: 2rem;
        flex-wrap: wrap;
      }
      .persona-tab {
        padding: 0.625rem 1.25rem;
        border-radius: 9999px;
        font-size: 0.875rem;
        font-weight: 500;
        cursor: pointer;
        border: 1px solid rgba(255,255,255,0.1);
        background: transparent;
        color: var(--hs-text-muted);
        transition: all 0.2s;
      }
      .persona-tab.active, .persona-tab:hover {
        background: linear-gradient(135deg, var(--hs-blue), var(--hs-purple));
        color: white;
        border-color: transparent;
      }

      /* How It Works */
      .steps-row {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 2rem;
        margin-top: 3rem;
      }
      .step-card { text-align: center; position: relative; }
      .step-card .step-num {
        width: 48px;
        height: 48px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.25rem;
        font-weight: 800;
        margin: 0 auto 1.25rem;
        background: linear-gradient(135deg, var(--hs-blue), var(--hs-purple));
      }
      .step-card h3 { font-size: 1.125rem; font-weight: 700; margin-bottom: 0.5rem; }
      .step-card p { font-size: 0.875rem; color: var(--hs-text-muted); line-height: 1.6; }
      .step-card .step-time {
        font-size: 0.75rem;
        color: var(--hs-green);
        font-weight: 600;
        margin-top: 0.75rem;
      }

      /* CTA Section */
      .cta-section {
        text-align: center;
        padding: 8rem 1.5rem;
        position: relative;
        overflow: hidden;
      }
      .cta-section .cta-bg {
        position: absolute;
        inset: 0;
        background: radial-gradient(ellipse at center, rgba(59,130,246,0.1) 0%, transparent 60%);
      }

      /* LiDAR Agnostic */
      .lidar-logos {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 3rem;
        flex-wrap: wrap;
        margin-top: 1.5rem;
      }
      .lidar-logos span {
        font-size: 1rem;
        font-weight: 600;
        color: var(--hs-text-muted);
        padding: 0.75rem 1.5rem;
        border-radius: 12px;
        border: 1px solid rgba(255,255,255,0.06);
        background: rgba(255,255,255,0.03);
      }

      /* Footer */
      .site-footer {
        border-top: 1px solid rgba(255,255,255,0.06);
        padding: 4rem 1.5rem 2rem;
      }
      .footer-grid {
        display: grid;
        grid-template-columns: 2fr repeat(3, 1fr);
        gap: 3rem;
        max-width: 1280px;
        margin: 0 auto;
      }
      .footer-brand p { color: var(--hs-text-muted); font-size: 0.875rem; line-height: 1.6; margin-top: 1rem; max-width: 300px; }
      .footer-col h4 { font-size: 0.8125rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; color: var(--hs-text-muted); margin-bottom: 1rem; }
      .footer-col a { display: block; color: var(--hs-text-muted); text-decoration: none; font-size: 0.875rem; padding: 0.25rem 0; transition: color 0.2s; }
      .footer-col a:hover { color: var(--hs-text); }
      .footer-bottom {
        max-width: 1280px;
        margin: 3rem auto 0;
        padding-top: 2rem;
        border-top: 1px solid rgba(255,255,255,0.06);
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 0.8125rem;
        color: var(--hs-text-muted);
      }

      /* Section Headers */
      .section-header { text-align: center; max-width: 700px; margin: 0 auto 4rem; }
      .section-header h2 { font-size: 2.5rem; font-weight: 800; line-height: 1.15; margin-bottom: 1rem; }
      .section-header p { color: var(--hs-text-muted); font-size: 1.0625rem; line-height: 1.7; }

      /* Responsive */
      @media (max-width: 1024px) {
        .feature-row { grid-template-columns: 1fr; gap: 2rem; }
        .feature-row.reverse { direction: ltr; }
        .value-grid { grid-template-columns: 1fr 1fr; }
        .metrics-row { grid-template-columns: repeat(2, 1fr); }
        .steps-row { grid-template-columns: repeat(2, 1fr); }
        .footer-grid { grid-template-columns: 1fr 1fr; }
      }
      @media (max-width: 768px) {
        .section { padding: 4rem 1rem; }
        .hero { min-height: auto; padding: 8rem 1rem 4rem; }
        .section-header h2 { font-size: 2rem; }
        .feature-text h2 { font-size: 1.75rem; }
        .value-grid { grid-template-columns: 1fr; }
        .metrics-row { grid-template-columns: 1fr 1fr; }
        .steps-row { grid-template-columns: 1fr; }
        .peble-flow { flex-direction: column; }
        .peble-arrow { transform: rotate(90deg); }
        .stat-card .number { font-size: 2rem; }
        .site-header nav { display: none; }
        .footer-grid { grid-template-columns: 1fr; }
      }

      /* Nav mobile toggle */
      .nav-toggle { display: none; background: none; border: none; color: white; font-size: 1.5rem; cursor: pointer; }
      @media (max-width: 768px) { .nav-toggle { display: block; } }
    </style>
  </head>
  <body>

    <!-- ============ HEADER ============ -->
    <header class="site-header">
      <div class="inner">
        <a href="#" class="logo">
          <img src="./hyperspace-logo.png" alt="Hyperspace">
          <span class="sidebar-gradient-text" style="font-size:1.25rem;">Hyperspace</span>
        </a>
        <nav>
          <a href="#features">Platform</a>
          <a href="#analytics">Analytics</a>
          <a href="#retail">Retail</a>
          <a href="#dooh">DOOH</a>
          <a href="#how-it-works">How It Works</a>
          <a href="#configurator">Configurator</a>
          <a href="#demo" class="btn-primary">Request Demo</a>
        </nav>
        <button class="nav-toggle" onclick="document.querySelector('nav').classList.toggle('show')" aria-label="Menu">&#9776;</button>
      </div>
    </header>

    <!-- ============ MAGIC HERO VIDEO BANNER ============ -->
    <section style="position:relative; width:100%; overflow:hidden; margin-top:60px;">
      <video autoplay muted loop playsinline poster="./magic-hero-poster.jpg"
        style="width:100%; display:block; object-fit:cover; max-height:70vh; filter:brightness(0.85);">
        <source src="./magic-hero.mp4" type="video/mp4">
      </video>
      <div style="position:absolute; bottom:0; left:0; z-index:2; padding:2rem 2.5rem;">
        <div style="background:rgba(10,15,26,0.65); backdrop-filter:blur(12px); -webkit-backdrop-filter:blur(12px); border-radius:16px; padding:1.5rem 2rem; max-width:620px; border:1px solid rgba(255,255,255,0.08);">
          <h1 style="font-size:clamp(1.5rem, 3.5vw, 2.5rem); font-weight:900; line-height:1.1; margin-bottom:0.75rem; color:white;">
            Turn Physical Space Into <span style="background:linear-gradient(135deg,#3b82f6,#a855f7);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;color:transparent;">Intelligent Space</span>
          </h1>
          <p style="font-size:clamp(0.8rem, 1.3vw, 1rem); color:rgba(255,255,255,0.8); line-height:1.6; margin:0;">
            See exactly how customers move through your space. Optimize layouts, reduce wait times, and measure the impact of every display. All without cameras, all in real time.
          </p>
        </div>
      </div>
    </section>

    <!-- ============ HERO ============ -->
    <section class="hero section-dark">
      <div class="hero-grid-bg"></div>
      <div class="orb-1"></div>
      <div class="orb-2"></div>
      <div class="container" style="position:relative; z-index:10;">
        <div class="feature-row" style="gap:3rem;">
          <div class="feature-text">
            <div class="reveal">
              <span class="badge badge-blue" style="font-size:0.8rem; text-transform:none; letter-spacing:0;">
                <span style="width:8px;height:8px;background:var(--hs-green);border-radius:50%;display:inline-block;animation:pulseGlow 2s infinite;"></span>
                Physical AI as a Service
              </span>
            </div>
            <h1 class="reveal" style="font-size:3.25rem; font-weight:900; line-height:1.08; margin-bottom:1.25rem;">
              3D Spatial Intelligence for <span class="gradient-text">Smart Venues</span>
            </h1>
            <p class="reveal" style="font-size:1.125rem; color:var(--hs-text-muted); line-height:1.7; max-width:520px; margin-bottom:2rem;">
              Configure LiDAR sensors, build digital twins, and unlock real-time analytics. Transform physical spaces into data-driven experiences — without cameras.
            </p>
            <div class="reveal" style="display:flex; gap:1rem; flex-wrap:wrap; margin-bottom:2.5rem;">
              <a href="#demo" class="btn-primary" style="padding:0.75rem 2rem; font-size:1rem;">Request Demo</a>
              <a href="#features" class="btn-outline" style="padding:0.75rem 2rem; font-size:1rem;">Explore Platform</a>
            </div>
            <div class="reveal" style="display:flex; gap:2rem; flex-wrap:wrap;">
              <span style="display:flex;align-items:center;gap:0.5rem;font-size:0.8125rem;color:var(--hs-text-muted);">
                <span style="color:var(--hs-green);">&#10003;</span> 100% Privacy Compliant
              </span>
              <span style="display:flex;align-items:center;gap:0.5rem;font-size:0.8125rem;color:var(--hs-text-muted);">
                <span style="color:var(--hs-green);">&#10003;</span> No Cameras Required
              </span>
              <span style="display:flex;align-items:center;gap:0.5rem;font-size:0.8125rem;color:var(--hs-text-muted);">
                <span style="color:var(--hs-green);">&#10003;</span> Real-Time Analytics
              </span>
            </div>
          </div>
          <div class="reveal" style="animation-delay:0.2s;">
            <div class="vid-showcase" style="animation: float 6s ease-in-out infinite;">
              <video autoplay loop muted playsinline preload="none"><source src="./hero.mp4" type="video/mp4"></video>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ============ STATS BAR ============ -->
    <section class="section-darker" style="padding:3rem 1.5rem; border-top:1px solid rgba(255,255,255,0.06); border-bottom:1px solid rgba(255,255,255,0.06);">
      <div class="container" style="display:grid; grid-template-columns:repeat(4,1fr); gap:1rem;">
        <div class="stat-card reveal">
          <div class="number gradient-text">10M+</div>
          <div class="label">Objects tracked / year</div>
        </div>
        <div class="stat-card reveal reveal-delay-1">
          <div class="number gradient-text">99.2%</div>
          <div class="label">Tracking accuracy</div>
        </div>
        <div class="stat-card reveal reveal-delay-2">
          <div class="number gradient-text">&lt;2h</div>
          <div class="label">Venue setup time</div>
        </div>
        <div class="stat-card reveal reveal-delay-3">
          <div class="number gradient-text">100%</div>
          <div class="label">Privacy compliant</div>
        </div>
      </div>
    </section>

    <!-- ============ PROBLEM / SOLUTION ============ -->
    <section class="section section-dark" id="features">
      <div class="container">
        <div class="section-header reveal">
          <span class="badge badge-purple">Why Hyperspace</span>
          <h2>You Can't Optimize What You Can't <span class="gradient-text">See</span></h2>
          <p>Cameras violate privacy. Manual counts are inaccurate. IoT sensors only tell half the story. Hyperspace uses LiDAR to track anonymous human movement — seeing every visitor, every path, every moment of engagement.</p>
        </div>
        <div class="value-grid">
          <div class="value-card card-glass reveal" style="border-radius:16px;">
            <div class="card-icon" style="background:rgba(59,130,246,0.15); color:var(--hs-blue);"><i data-lucide="shield" style="width:24px;height:24px;"></i></div>
            <h3>Privacy First</h3>
            <p>No cameras. No facial recognition. Just anonymous point clouds. GDPR &amp; CCPA compliant by design.</p>
          </div>
          <div class="value-card card-glass reveal reveal-delay-1" style="border-radius:16px;">
            <div class="card-icon" style="background:rgba(34,197,94,0.15); color:var(--hs-green);"><i data-lucide="zap" style="width:24px;height:24px;"></i></div>
            <h3>Real-Time Insights</h3>
            <p>Live foot traffic, queue lengths, and occupancy — updated every second. React to trends as they happen.</p>
          </div>
          <div class="value-card card-glass reveal reveal-delay-2" style="border-radius:16px;">
            <div class="card-icon" style="background:rgba(139,92,246,0.15); color:var(--hs-purple);"><i data-lucide="crosshair" style="width:24px;height:24px;"></i></div>
            <h3>Precision Tracking</h3>
            <p>Sub-meter accuracy tracks every visitor journey. Understand dwell time, flow patterns, and engagement depth.</p>
          </div>
          <div class="value-card card-glass reveal" style="border-radius:16px;">
            <div class="card-icon" style="background:rgba(6,182,212,0.15); color:var(--hs-cyan);"><i data-lucide="box" style="width:24px;height:24px;"></i></div>
            <h3>Digital Twin</h3>
            <p>Build accurate 3D models of your physical space. Visualize analytics in context for actionable insights.</p>
          </div>
          <div class="value-card card-glass reveal reveal-delay-1" style="border-radius:16px;">
            <div class="card-icon" style="background:rgba(245,158,11,0.15); color:var(--hs-orange);"><i data-lucide="bar-chart-3" style="width:24px;height:24px;"></i></div>
            <h3>Behavioral Analytics</h3>
            <p>Dwell times, engagement patterns, customer journeys, bounce rates — the full behavioral picture.</p>
          </div>
          <div class="value-card card-glass reveal reveal-delay-2" style="border-radius:16px;">
            <div class="card-icon" style="background:rgba(59,130,246,0.15); color:var(--hs-blue);"><i data-lucide="sparkles" style="width:24px;height:24px;"></i></div>
            <h3>AI-Powered Narration</h3>
            <p>AI Narrator explains KPIs in plain business language. Get anomaly alerts and trend detection automatically.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- ============ DIGITAL TWIN ============ -->
    <section class="section section-alt">
      <div class="container">
        <div class="feature-row reveal">
          <div class="feature-text">
            <span class="badge badge-blue">Digital Twin</span>
            <h2>From Floor Plan to 3D Model in <span class="gradient-text">Minutes</span></h2>
            <p>Upload existing CAD floor plans or build from scratch. Hyperspace auto-detects fixtures, maps them to 3D assets, and generates your complete venue layout.</p>
            <ul class="feature-list">
              <li><span class="icon icon-blue"><i data-lucide="check" style="width:12px;height:12px;"></i></span> DWG/DXF import with automatic fixture grouping</li>
              <li><span class="icon icon-blue"><i data-lucide="check" style="width:12px;height:12px;"></i></span> Smart asset mapping — shelves, checkouts, displays</li>
              <li><span class="icon icon-blue"><i data-lucide="check" style="width:12px;height:12px;"></i></span> Interactive 3D builder with drag, drop, rotate</li>
              <li><span class="icon icon-blue"><i data-lucide="check" style="width:12px;height:12px;"></i></span> Automatically recognizes and maps every fixture in your floor plan</li>
            </ul>
          </div>
          <div class="vid-showcase">
            <video autoplay loop muted playsinline preload="none"><source src="./venue-setup.mp4" type="video/mp4"></video>
          </div>
        </div>
      </div>
    </section>

    <!-- ============ LiDAR INFRASTRUCTURE ============ -->
    <section class="section section-dark">
      <div class="container">
        <div class="feature-row reverse reveal">
          <div class="feature-text">
            <span class="badge badge-green">LiDAR Infrastructure</span>
            <h2>Plan. Deploy. Monitor. <span class="gradient-text">All From One Platform.</span></h2>
            <p>Visualize LiDAR coverage before installation, commission edge servers remotely via Tailscale VPN, and monitor every sensor in real-time.</p>
            <ul class="feature-list">
              <li><span class="icon icon-green"><i data-lucide="check" style="width:12px;height:12px;"></i></span> Coverage planner with field-of-view visualization</li>
              <li><span class="icon icon-green"><i data-lucide="check" style="width:12px;height:12px;"></i></span> Zero-touch edge commissioning via secure Tailscale</li>
              <li><span class="icon icon-green"><i data-lucide="check" style="width:12px;height:12px;"></i></span> Drag-and-drop LiDAR pairing to planned placements</li>
              <li><span class="icon icon-green"><i data-lucide="check" style="width:12px;height:12px;"></i></span> Real-time health dashboards and deployment history</li>
            </ul>
          </div>
          <div class="vid-showcase">
            <video autoplay loop muted playsinline preload="none"><source src="./edge-commissioning.mp4" type="video/mp4"></video>
          </div>
        </div>
      </div>
    </section>

    <!-- ============ LiDAR AGNOSTIC ============ -->
    <section class="section-darker" style="padding:3rem 1.5rem; border-top:1px solid rgba(255,255,255,0.06); border-bottom:1px solid rgba(255,255,255,0.06);">
      <div class="container" style="text-align:center;">
        <p class="reveal" style="color:var(--hs-text-muted); font-size:0.9375rem; margin-bottom:1.25rem;">Hardware-Agnostic — Compatible with leading LiDAR manufacturers</p>
        <div class="lidar-logos reveal">
          <span>Livox</span>
          <span>Ouster</span>
          <span>Velodyne</span>
          <span>Hesai</span>
          <span>RoboSense</span>
          <span>Quanergy</span>
        </div>
      </div>
    </section>

    <!-- ============ ANALYTICS ============ -->
    <section class="section section-alt" id="analytics">
      <div class="container">
        <div class="feature-row reveal">
          <div class="feature-text">
            <span class="badge badge-purple">Analytics &amp; KPIs</span>
            <h2>Know Every Number That <span class="gradient-text">Matters</span></h2>
            <p>From live occupancy to dwell rates, from peak hours to engagement depth — Hyperspace gives you the complete analytical picture for every zone.</p>
            <ul class="feature-list">
              <li><span class="icon icon-purple"><i data-lucide="check" style="width:12px;height:12px;"></i></span> Live occupancy, total entries, time spent per zone</li>
              <li><span class="icon icon-purple"><i data-lucide="check" style="width:12px;height:12px;"></i></span> Dwell rate, engagement rate, and bounce rate</li>
              <li><span class="icon icon-purple"><i data-lucide="check" style="width:12px;height:12px;"></i></span> Visits by hour with peak detection</li>
              <li><span class="icon icon-purple"><i data-lucide="check" style="width:12px;height:12px;"></i></span> Flow analysis — draws, exits, customer journeys</li>
              <li><span class="icon icon-purple"><i data-lucide="check" style="width:12px;height:12px;"></i></span> Smart KPI mode with AI-assisted zone generation</li>
            </ul>
          </div>
          <div class="vid-showcase">
            <video autoplay loop muted playsinline><source src="./hero.mp4" type="video/mp4"></video>
          </div>
        </div>
      </div>
    </section>

    <!-- ============ QUEUE MANAGEMENT ============ -->
    <section class="section section-dark">
      <div class="container">
        <div class="feature-row reverse reveal">
          <div class="feature-text">
            <span class="badge badge-orange">Queue Management</span>
            <h2>Eliminate Queue <span class="gradient-text">Frustration</span></h2>
            <p>Long checkout lines are the #1 reason shoppers abandon purchases and switch stores. Hyperspace turns every queue into a real-time decision point — so you can act before customers leave.</p>
            <ul class="feature-list">
              <li><span class="icon icon-orange"><i data-lucide="check" style="width:12px;height:12px;"></i></span> Protect revenue by opening lanes before queues build up</li>
              <li><span class="icon icon-orange"><i data-lucide="check" style="width:12px;height:12px;"></i></span> Detect when shoppers abandon checkout — and understand why</li>
              <li><span class="icon icon-orange"><i data-lucide="check" style="width:12px;height:12px;"></i></span> Automatic alerts give staff time to react before frustration peaks</li>
              <li><span class="icon icon-orange"><i data-lucide="check" style="width:12px;height:12px;"></i></span> Compare lane performance to balance staffing efficiently</li>
            </ul>
            <div style="display:flex; gap:1.5rem; margin-top:1.5rem; flex-wrap:wrap;">
              <div class="card-glass" style="padding:1rem 1.25rem; border-radius:12px; text-align:center; flex:1; min-width:140px;">
                <div style="margin-bottom:0.25rem;"><i data-lucide="trending-up" style="width:20px;height:20px;color:var(--hs-green);"></i></div>
                <div style="font-size:0.8125rem; font-weight:600; color:var(--hs-text);">Higher Conversion</div>
                <div style="font-size:0.6875rem; color:var(--hs-text-muted);">Shorter waits mean fewer abandoned baskets</div>
              </div>
              <div class="card-glass" style="padding:1rem 1.25rem; border-radius:12px; text-align:center; flex:1; min-width:140px;">
                <div style="margin-bottom:0.25rem;"><i data-lucide="users" style="width:20px;height:20px;color:var(--hs-orange);"></i></div>
                <div style="font-size:0.8125rem; font-weight:600; color:var(--hs-text);">Smarter Staffing</div>
                <div style="font-size:0.6875rem; color:var(--hs-text-muted);">Staff the right lanes at the right time</div>
              </div>
              <div class="card-glass" style="padding:1rem 1.25rem; border-radius:12px; text-align:center; flex:1; min-width:140px;">
                <div style="margin-bottom:0.25rem;"><i data-lucide="heart" style="width:20px;height:20px;color:var(--hs-blue);"></i></div>
                <div style="font-size:0.8125rem; font-weight:600; color:var(--hs-text);">Better Experience</div>
                <div style="font-size:0.6875rem; color:var(--hs-text-muted);">Happy customers come back more often</div>
              </div>
            </div>
          </div>
          <div class="vid-showcase">
            <video autoplay loop muted playsinline preload="none"><source src="./queue.mp4" type="video/mp4"></video>
          </div>
        </div>
      </div>
    </section>

    <!-- ============ RETAIL: PLANOGRAM ============ -->
    <section class="section section-alt" id="retail">
      <div class="container">
        <div class="feature-row reveal">
          <div class="feature-text">
            <span class="badge badge-cyan">Retail Intelligence</span>
            <h2>Optimize Every Shelf. Maximize Every <span class="gradient-text">Position.</span></h2>
            <p>Build planograms with drag-and-drop, import SKU catalogs, and link product placement to real shopper engagement data. Know which positions drive the most revenue.</p>
            <ul class="feature-list">
              <li><span class="icon icon-blue"><i data-lucide="check" style="width:12px;height:12px;"></i></span> Drag &amp; drop SKU placement on multi-level shelves</li>
              <li><span class="icon icon-blue"><i data-lucide="check" style="width:12px;height:12px;"></i></span> Smart position scoring — see which shelf spots attract the most attention and convert best</li>
              <li><span class="icon icon-blue"><i data-lucide="check" style="width:12px;height:12px;"></i></span> Understand how shoppers browse: which categories draw interest and which brands win</li>
              <li><span class="icon icon-blue"><i data-lucide="check" style="width:12px;height:12px;"></i></span> Link every shelf position to actual sales impact and shopper engagement</li>
            </ul>
          </div>
          <div class="vid-showcase">
            <video autoplay loop muted playsinline preload="none"><source src="./planogram.mp4" type="video/mp4"></video>
          </div>
        </div>
      </div>
    </section>

    <!-- ============ DOOH & PEBLE ============ -->
    <section class="section section-dark" id="dooh">
      <div class="container">
        <div class="section-header reveal">
          <span class="badge badge-orange">Digital Out-of-Home</span>
          <h2>Prove Your Advertising <span class="gradient-text">Works</span></h2>
          <p>PEBLE&#8482; — Post-Exposure Behavioral Lift Engine. Measure real-world DOOH advertising impact without cameras, using scientifically-valid attribution.</p>
        </div>

        <div class="feature-row reveal" style="margin-bottom:4rem;">
          <div class="vid-showcase">
            <video autoplay loop muted playsinline preload="none"><source src="./dooh.mp4" type="video/mp4"></video>
          </div>
          <div class="feature-text">
            <h2 style="font-size:1.75rem;">Attention Quality Score (AQS&#8482;)</h2>
            <p>AQS answers the question every advertiser asks: <strong style="color:var(--hs-text);">"Did anyone actually pay attention to my ad?"</strong> It measures real viewer engagement by analyzing whether people stayed near the screen, slowed down, and gave it their focus — not just whether they walked past.</p>
            <div style="display:flex; gap:1rem; flex-wrap:wrap;">
              <div class="card-glass" style="padding:1rem; border-radius:12px; text-align:center; flex:1;">
                <div style="margin-bottom:0.5rem;"><i data-lucide="star" style="width:20px;height:20px;color:var(--hs-green);"></i></div>
                <div style="font-size:0.8125rem; font-weight:700; color:var(--hs-green);">Premium</div>
                <div style="font-size:0.6875rem; color:var(--hs-text-muted);">High-value views worth premium pricing</div>
              </div>
              <div class="card-glass" style="padding:1rem; border-radius:12px; text-align:center; flex:1;">
                <div style="margin-bottom:0.5rem;"><i data-lucide="eye" style="width:20px;height:20px;color:var(--hs-orange);"></i></div>
                <div style="font-size:0.8125rem; font-weight:700; color:var(--hs-orange);">Qualified</div>
                <div style="font-size:0.6875rem; color:var(--hs-text-muted);">Genuine exposure that influences decisions</div>
              </div>
              <div class="card-glass" style="padding:1rem; border-radius:12px; text-align:center; flex:1;">
                <div style="margin-bottom:0.5rem;"><i data-lucide="move" style="width:20px;height:20px;color:var(--hs-text-muted);"></i></div>
                <div style="font-size:0.8125rem; font-weight:700; color:var(--hs-text-muted);">Passerby</div>
                <div style="font-size:0.6875rem; color:var(--hs-text-muted);">People who walked by without engaging</div>
              </div>
            </div>
          </div>
        </div>

        <!-- PEBLE Flow -->
        <div class="reveal" style="text-align:center; margin-bottom:1rem;">
          <h3 style="font-size:1.5rem; font-weight:700;">How PEBLE&#8482; Works</h3>
          <p style="color:var(--hs-text-muted); font-size:0.9375rem;">Measure how in-store digital screens influence shopper behavior — LiDAR-based, privacy-safe.</p>
        </div>
        <div class="peble-flow reveal">
          <div class="peble-step">
            <div class="step-icon" style="background:rgba(59,130,246,0.15); color:var(--hs-blue);"><i data-lucide="monitor" style="width:28px;height:28px;"></i></div>
            <div class="step-title">Exposure</div>
            <div class="step-desc">Shopper sees digital screen</div>
          </div>
          <div class="peble-arrow"><i data-lucide="chevron-right" style="width:20px;height:20px;"></i></div>
          <div class="peble-step">
            <div class="step-icon" style="background:rgba(139,92,246,0.15); color:var(--hs-purple);"><i data-lucide="radar" style="width:28px;height:28px;"></i></div>
            <div class="step-title">Match</div>
            <div class="step-desc">LiDAR tracks anonymous movement</div>
          </div>
          <div class="peble-arrow"><i data-lucide="chevron-right" style="width:20px;height:20px;"></i></div>
          <div class="peble-step">
            <div class="step-icon" style="background:rgba(6,182,212,0.15); color:var(--hs-cyan);"><i data-lucide="map-pin" style="width:28px;height:28px;"></i></div>
            <div class="step-title">Track</div>
            <div class="step-desc">Monitor path and dwell time</div>
          </div>
          <div class="peble-arrow"><i data-lucide="chevron-right" style="width:20px;height:20px;"></i></div>
          <div class="peble-step">
            <div class="step-icon" style="background:rgba(245,158,11,0.15); color:var(--hs-orange);"><i data-lucide="bar-chart-3" style="width:28px;height:28px;"></i></div>
            <div class="step-title">Compare</div>
            <div class="step-desc">Exposed vs. control group</div>
          </div>
          <div class="peble-arrow"><i data-lucide="chevron-right" style="width:20px;height:20px;"></i></div>
          <div class="peble-step">
            <div class="step-icon" style="background:rgba(34,197,94,0.15); color:var(--hs-green);"><i data-lucide="trending-up" style="width:28px;height:28px;"></i></div>
            <div class="step-title">Lift</div>
            <div class="step-desc">Quantify behavior change</div>
          </div>
        </div>

        <!-- PEBLE GIF + Metrics -->
        <div class="feature-row reveal" style="margin-top:3rem;">
          <div class="vid-showcase">
            <video autoplay loop muted playsinline preload="none"><source src="./peble.mp4" type="video/mp4"></video>
          </div>
          <div class="feature-text">
            <h3 style="font-size:1.5rem; font-weight:700; margin-bottom:1rem;">Proven Campaign Results</h3>
            <div style="display:grid; grid-template-columns:1fr 1fr; gap:1rem;">
              <div class="card-glass" style="padding:1.25rem; border-radius:12px;">
                <div style="font-size:1.75rem; font-weight:800; color:var(--hs-green);">+23%</div>
                <div style="font-size:0.75rem; font-weight:600; margin-top:0.25rem;">EAL&#8482;</div>
                <div style="font-size:0.6875rem; color:var(--hs-text-muted);">Exposure-to-Action Lift</div>
              </div>
              <div class="card-glass" style="padding:1.25rem; border-radius:12px;">
                <div style="font-size:1.75rem; font-weight:800; color:var(--hs-cyan);">25%</div>
                <div style="font-size:0.75rem; font-weight:600; margin-top:0.25rem;">TTA&#8482;</div>
                <div style="font-size:0.6875rem; color:var(--hs-text-muted);">Faster Time-to-Action</div>
              </div>
              <div class="card-glass" style="padding:1.25rem; border-radius:12px;">
                <div style="font-size:1.75rem; font-weight:800; color:var(--hs-purple);">57.0</div>
                <div style="font-size:0.75rem; font-weight:600; margin-top:0.25rem;">AQS&#8482;</div>
                <div style="font-size:0.6875rem; color:var(--hs-text-muted);">Attention Quality Score</div>
              </div>
              <div class="card-glass" style="padding:1.25rem; border-radius:12px;">
                <div style="font-size:1.75rem; font-weight:800; color:var(--hs-orange);">2.6</div>
                <div style="font-size:0.75rem; font-weight:600; margin-top:0.25rem;">CES&#8482;</div>
                <div style="font-size:0.6875rem; color:var(--hs-text-muted);">Campaign Effectiveness</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ============ REPLAY INSIGHTS & AI NARRATOR ============ -->
    <section class="section section-alt">
      <div class="container">
        <div class="feature-row reverse reveal">
          <div class="feature-text">
            <span class="badge badge-purple">Business Intelligence</span>
            <h2>Insights That Speak Your <span class="gradient-text">Language</span></h2>
            <p>AI Narrator translates complex KPIs into plain business language. Replay Insights lets you rewind any moment, understand what happened, and prevent it next time.</p>
            <ul class="feature-list">
              <li><span class="icon icon-purple"><i data-lucide="check" style="width:12px;height:12px;"></i></span> AI-powered anomaly detection and trend alerts</li>
              <li><span class="icon icon-purple"><i data-lucide="check" style="width:12px;height:12px;"></i></span> Persona-based narratives — Store Manager, Merchandising, Media</li>
              <li><span class="icon icon-purple"><i data-lucide="check" style="width:12px;height:12px;"></i></span> Step-by-step guided story mode through KPIs</li>
              <li><span class="icon icon-purple"><i data-lucide="check" style="width:12px;height:12px;"></i></span> Replay significant events with root cause analysis</li>
              <li><span class="icon icon-purple"><i data-lucide="check" style="width:12px;height:12px;"></i></span> Pre-built story recipes: "Morning Rush", "Queue Deep-Dive"</li>
            </ul>
          </div>
          <div class="vid-showcase">
            <video autoplay loop muted playsinline preload="none"><source src="./replay.mp4" type="video/mp4"></video>
          </div>
        </div>
      </div>
    </section>

    <!-- ============ TIMELINE & BEHAVIORAL INSIGHTS ============ -->
    <section class="section section-dark">
      <div class="container">
        <div class="feature-row reveal">
          <div class="feature-text">
            <span class="badge badge-blue">Timeline &amp; Behavioral Insights</span>
            <h2>The Timeline Is the <span class="gradient-text">Truth</span></h2>
            <p>KPIs tell you <em>what</em> changed. The Timeline shows you <em>why</em>. Hyperspace automatically detects meaningful behavioral events — queue spikes, engagement drops, flow bottlenecks — and marks them directly on an annotated timeline so you can investigate in seconds.</p>
            <ul class="feature-list">
              <li><span class="icon icon-blue"><i data-lucide="check" style="width:12px;height:12px;"></i></span> Color-coded event markers appear automatically when KPIs shift — no manual searching</li>
              <li><span class="icon icon-blue"><i data-lucide="check" style="width:12px;height:12px;"></i></span> Click any event to open a curated Replay Insight: filtered trajectories, affected zones, and relevant KPIs only</li>
              <li><span class="icon icon-blue"><i data-lucide="check" style="width:12px;height:12px;"></i></span> Animated 3D playback of what actually happened — camera auto-frames the affected area</li>
              <li><span class="icon icon-blue"><i data-lucide="check" style="width:12px;height:12px;"></i></span> AI-generated business narrative explains cause and impact in plain language</li>
              <li><span class="icon icon-blue"><i data-lucide="check" style="width:12px;height:12px;"></i></span> Deep links to take action: open Queue Center, compare with yesterday, save as a Story Step</li>
            </ul>
          </div>
          <div class="vid-showcase">
            <video autoplay loop muted playsinline preload="none"><source src="./timeline.mp4" type="video/mp4"></video>
          </div>
        </div>

        <div style="margin-top:3.5rem;">
          <div class="reveal" style="text-align:center; margin-bottom:1.5rem;">
            <h3 style="font-size:1.5rem; font-weight:700;">Behavioral Event Types</h3>
            <p style="color:var(--hs-text-muted); font-size:0.9375rem;">The system automatically detects and classifies events that matter to your business.</p>
          </div>
          <div class="reveal" style="display:grid; grid-template-columns:repeat(4,1fr); gap:1rem;">
            <div class="card-glass" style="padding:1.25rem; border-radius:12px;">
              <div style="display:flex; align-items:center; gap:0.5rem; margin-bottom:0.5rem;">
                <div style="width:8px;height:8px;border-radius:50%;background:#ef4444;"></div>
                <span style="font-size:0.8125rem; font-weight:700;">Queue Events</span>
              </div>
              <p style="font-size:0.75rem; color:var(--hs-text-muted); line-height:1.5;">Queue build-up spikes, lane undersupply, abandonment waves, lane-switching patterns</p>
            </div>
            <div class="card-glass" style="padding:1.25rem; border-radius:12px;">
              <div style="display:flex; align-items:center; gap:0.5rem; margin-bottom:0.5rem;">
                <div style="width:8px;height:8px;border-radius:50%;background:#8b5cf6;"></div>
                <span style="font-size:0.8125rem; font-weight:700;">Shelf &amp; Category</span>
              </div>
              <p style="font-size:0.75rem; color:var(--hs-text-muted); line-height:1.5;">High pass-by with low browse, browsing without conversion, placement penalties</p>
            </div>
            <div class="card-glass" style="padding:1.25rem; border-radius:12px;">
              <div style="display:flex; align-items:center; gap:0.5rem; margin-bottom:0.5rem;">
                <div style="width:8px;height:8px;border-radius:50%;background:#f59e0b;"></div>
                <span style="font-size:0.8125rem; font-weight:700;">Flow &amp; Movement</span>
              </div>
              <p style="font-size:0.75rem; color:var(--hs-text-muted); line-height:1.5;">Corridor bottlenecks, route detours, visit duration shifts, congestion points</p>
            </div>
            <div class="card-glass" style="padding:1.25rem; border-radius:12px;">
              <div style="display:flex; align-items:center; gap:0.5rem; margin-bottom:0.5rem;">
                <div style="width:8px;height:8px;border-radius:50%;background:#22c55e;"></div>
                <span style="font-size:0.8125rem; font-weight:700;">DOOH &amp; Media</span>
              </div>
              <p style="font-size:0.75rem; color:var(--hs-text-muted); line-height:1.5;">Exposure-to-action wins, creative mismatches, attention quality drops</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ============ USE CASES / PERSONAS ============ -->
    <section class="section section-alt">
      <div class="container">
        <div class="section-header reveal">
          <span class="badge badge-blue">Built For Every Role</span>
          <h2>One Platform, Every <span class="gradient-text">Perspective</span></h2>
          <p>Whether you manage queues, shelves, media campaigns, or multi-venue operations — Hyperspace delivers the right insights for your role.</p>
        </div>
        <div class="value-grid reveal" style="grid-template-columns: repeat(5, 1fr);">
          <div class="value-card card-glass" style="border-radius:16px; text-align:center; display:flex; flex-direction:column; align-items:center;">
            <div style="margin-bottom:1rem; color:var(--hs-blue); display:flex; align-items:center; justify-content:center;"><i data-lucide="building-2" style="width:32px;height:32px;"></i></div>
            <h3 style="font-size:0.9375rem;">Store Manager</h3>
            <p style="font-size:0.8125rem;">Queue monitoring, occupancy, staffing decisions</p>
          </div>
          <div class="value-card card-glass" style="border-radius:16px; text-align:center; display:flex; flex-direction:column; align-items:center;">
            <div style="margin-bottom:1rem; color:var(--hs-cyan); display:flex; align-items:center; justify-content:center;"><i data-lucide="shopping-cart" style="width:32px;height:32px;"></i></div>
            <h3 style="font-size:0.9375rem;">Category Manager</h3>
            <p style="font-size:0.8125rem;">Shelf performance, product placement optimization</p>
          </div>
          <div class="value-card card-glass" style="border-radius:16px; text-align:center; display:flex; flex-direction:column; align-items:center;">
            <div style="margin-bottom:1rem; color:var(--hs-purple); display:flex; align-items:center; justify-content:center;"><i data-lucide="target" style="width:32px;height:32px;"></i></div>
            <h3 style="font-size:0.9375rem;">Marketing</h3>
            <p style="font-size:0.8125rem;">Campaign effectiveness, DOOH ROI, attribution</p>
          </div>
          <div class="value-card card-glass" style="border-radius:16px; text-align:center; display:flex; flex-direction:column; align-items:center;">
            <div style="margin-bottom:1rem; color:var(--hs-orange); display:flex; align-items:center; justify-content:center;"><i data-lucide="settings" style="width:32px;height:32px;"></i></div>
            <h3 style="font-size:0.9375rem;">Operations</h3>
            <p style="font-size:0.8125rem;">Multi-venue analytics, performance benchmarking</p>
          </div>
          <div class="value-card card-glass" style="border-radius:16px; text-align:center; display:flex; flex-direction:column; align-items:center;">
            <div style="margin-bottom:1rem; color:var(--hs-green); display:flex; align-items:center; justify-content:center;"><i data-lucide="bar-chart-3" style="width:32px;height:32px;"></i></div>
            <h3 style="font-size:0.9375rem;">Finance</h3>
            <p style="font-size:0.8125rem;">Revenue attribution, conversion tracking</p>
          </div>
        </div>
      </div>
    </section>

    <!-- ============ HOW IT WORKS ============ -->
    <section class="section section-alt" id="how-it-works">
      <div class="container">
        <div class="section-header reveal">
          <span class="badge badge-green">How It Works</span>
          <h2>From Signup to Insights in <span class="gradient-text">4 Steps</span></h2>
        </div>
        <div class="steps-row reveal">
          <div class="step-card">
            <div class="step-num">1</div>
            <h3>Build</h3>
            <p>Upload your DWG floor plan or build your venue in the interactive 3D builder.</p>
            <div class="step-time">&#9201; Hours</div>
          </div>
          <div class="step-card">
            <div class="step-num">2</div>
            <h3>Deploy</h3>
            <p>Install LiDARs, commission edge servers remotely via our secure Tailscale network.</p>
            <div class="step-time">&#9201; Days</div>
          </div>
          <div class="step-card">
            <div class="step-num">3</div>
            <h3>Configure</h3>
            <p>Create zones, set KPI thresholds, or let Smart KPI Mode auto-generate them.</p>
            <div class="step-time">&#9201; Minutes</div>
          </div>
          <div class="step-card">
            <div class="step-num">4</div>
            <h3>Analyze</h3>
            <p>Get real-time analytics, AI narratives, and replay insights instantly.</p>
            <div class="step-time">&#9201; Instant</div>
          </div>
        </div>
      </div>
    </section>

    <!-- ============ SCREENSHOT GALLERY ============ -->
    <section class="section section-dark">
      <div class="container">
        <div class="section-header reveal">
          <span class="badge badge-cyan">Platform Gallery</span>
          <h2>See Hyperspace in <span class="gradient-text">Action</span></h2>
          <p>Click any card to watch the full walkthrough video.</p>
        </div>
        <div class="reveal" style="display:grid; grid-template-columns:repeat(3,1fr); gap:1.5rem;">
          <div>
            <div class="vid-showcase gallery-card" onclick="openVideoModal('./venue-setup.mp4')">
              <div class="play-overlay"><svg viewBox="0 0 24 24" fill="currentColor" stroke="none"><polygon points="5 3 19 12 5 21 5 3"/></svg></div>
              <img src="./hyperspace-1.png" alt="3D Venue Builder" loading="lazy">
            </div>
            <h4 style="color:white; font-size:0.9375rem; font-weight:700; margin-top:0.75rem; text-align:left;">3D Venue Builder</h4>
            <p style="color:var(--hs-text-muted); font-size:0.8125rem; margin-top:0.25rem; text-align:left; line-height:1.5;">Build your venue in 3D — import DWG floor plans or create from scratch</p>
          </div>
          <div>
            <div class="vid-showcase gallery-card" onclick="openVideoModal('./hero.mp4')">
              <div class="play-overlay"><svg viewBox="0 0 24 24" fill="currentColor" stroke="none"><polygon points="5 3 19 12 5 21 5 3"/></svg></div>
              <img src="./hyperspace-8.png" alt="Zone Analytics Dashboard" loading="lazy">
            </div>
            <h4 style="color:white; font-size:0.9375rem; font-weight:700; margin-top:0.75rem; text-align:left;">Zone Analytics</h4>
            <p style="color:var(--hs-text-muted); font-size:0.8125rem; margin-top:0.25rem; text-align:left; line-height:1.5;">Live zone analytics — occupancy, dwell time, and visitor flow</p>
          </div>
          <div>
            <div class="vid-showcase gallery-card" onclick="openVideoModal('./edge-commissioning.mp4')">
              <div class="play-overlay"><svg viewBox="0 0 24 24" fill="currentColor" stroke="none"><polygon points="5 3 19 12 5 21 5 3"/></svg></div>
              <img src="./hyperspace-3.png" alt="Edge Commissioning Portal" loading="lazy">
            </div>
            <h4 style="color:white; font-size:0.9375rem; font-weight:700; margin-top:0.75rem; text-align:left;">Edge Commissioning</h4>
            <p style="color:var(--hs-text-muted); font-size:0.8125rem; margin-top:0.25rem; text-align:left; line-height:1.5;">Remote LiDAR commissioning — pair sensors and monitor health</p>
          </div>
          <div>
            <div class="vid-showcase gallery-card" onclick="openVideoModal('./planogram.mp4')">
              <div class="play-overlay"><svg viewBox="0 0 24 24" fill="currentColor" stroke="none"><polygon points="5 3 19 12 5 21 5 3"/></svg></div>
              <img src="./hyperspace-7.png" alt="Planogram Builder" loading="lazy">
            </div>
            <h4 style="color:white; font-size:0.9375rem; font-weight:700; margin-top:0.75rem; text-align:left;">Planogram Builder</h4>
            <p style="color:var(--hs-text-muted); font-size:0.8125rem; margin-top:0.25rem; text-align:left; line-height:1.5;">Drag-and-drop SKUs and track shelf performance</p>
          </div>
          <div>
            <div class="vid-showcase gallery-card" onclick="openVideoModal('./dooh.mp4')">
              <div class="play-overlay"><svg viewBox="0 0 24 24" fill="currentColor" stroke="none"><polygon points="5 3 19 12 5 21 5 3"/></svg></div>
              <img src="./hyperspace-11.png" alt="DOOH Analytics" loading="lazy">
            </div>
            <h4 style="color:white; font-size:0.9375rem; font-weight:700; margin-top:0.75rem; text-align:left;">DOOH Screen Analytics</h4>
            <p style="color:var(--hs-text-muted); font-size:0.8125rem; margin-top:0.25rem; text-align:left; line-height:1.5;">Impressions, attention quality, and audience trends</p>
          </div>
          <div>
            <div class="vid-showcase gallery-card" onclick="openVideoModal('./peble.mp4')">
              <div class="play-overlay"><svg viewBox="0 0 24 24" fill="currentColor" stroke="none"><polygon points="5 3 19 12 5 21 5 3"/></svg></div>
              <img src="./hyperspace-13.png" alt="PEBLE Attribution Engine" loading="lazy">
            </div>
            <h4 style="color:white; font-size:0.9375rem; font-weight:700; margin-top:0.75rem; text-align:left;">PEBLE&#8482; Attribution</h4>
            <p style="color:var(--hs-text-muted); font-size:0.8125rem; margin-top:0.25rem; text-align:left; line-height:1.5;">Measure real advertising impact on shopper behavior</p>
          </div>
          <div>
            <div class="vid-showcase gallery-card" onclick="openVideoModal('./replay.mp4')">
              <div class="play-overlay"><svg viewBox="0 0 24 24" fill="currentColor" stroke="none"><polygon points="5 3 19 12 5 21 5 3"/></svg></div>
              <img src="./hyperspace-9.png" alt="Behavioral Clustering" loading="lazy">
            </div>
            <h4 style="color:white; font-size:0.9375rem; font-weight:700; margin-top:0.75rem; text-align:left;">Behavioral Clustering</h4>
            <p style="color:var(--hs-text-muted); font-size:0.8125rem; margin-top:0.25rem; text-align:left; line-height:1.5;">Group visitors by movement patterns and engagement</p>
          </div>
          <div>
            <div class="vid-showcase gallery-card" onclick="openVideoModal('./intro.mp4')">
              <div class="play-overlay"><svg viewBox="0 0 24 24" fill="currentColor" stroke="none"><polygon points="5 3 19 12 5 21 5 3"/></svg></div>
              <img src="./hyperspace-2.png" alt="Platform Intro Storytelling" loading="lazy">
            </div>
            <h4 style="color:white; font-size:0.9375rem; font-weight:700; margin-top:0.75rem; text-align:left;">Platform Intro</h4>
            <p style="color:var(--hs-text-muted); font-size:0.8125rem; margin-top:0.25rem; text-align:left; line-height:1.5;">A guided storytelling tour of what happened in your venue</p>
          </div>
          <div>
            <div class="vid-showcase gallery-card" onclick="openVideoModal('./timeline.mp4')">
              <div class="play-overlay"><svg viewBox="0 0 24 24" fill="currentColor" stroke="none"><polygon points="5 3 19 12 5 21 5 3"/></svg></div>
              <img src="./hyperspace-10.png" alt="Timeline Behavioral Events" loading="lazy">
            </div>
            <h4 style="color:white; font-size:0.9375rem; font-weight:700; margin-top:0.75rem; text-align:left;">Timeline Explorer</h4>
            <p style="color:var(--hs-text-muted); font-size:0.8125rem; margin-top:0.25rem; text-align:left; line-height:1.5;">Visualize behavioral clusters by event type over time</p>
          </div>
        </div>
      </div>
    </section>

    <!-- ============ CONFIGURATOR WIZARD ============ -->
    <section class="section cfg-section" id="configurator">
      <div class="container">
        <div class="section-header reveal">
          <span class="badge badge-blue">Configurator</span>
          <h2>Configure Your <span class="gradient-text">Space</span></h2>
          <p>See how many LiDARs you need and get instant pricing — in under 60 seconds.</p>
        </div>
        <div class="cfg-wrap reveal">
          <!-- Progress bar -->
          <div class="cfg-progress" id="cfgProgress">
            <div class="cfg-step-wrap" onclick="cfgClickStep(0)">
              <div class="cfg-step-dot active" data-step="0">1</div>
              <div class="cfg-step-label">Venue</div>
            </div>
            <div class="cfg-step-line" data-line="0"></div>
            <div class="cfg-step-wrap" onclick="cfgClickStep(1)">
              <div class="cfg-step-dot" data-step="1">2</div>
              <div class="cfg-step-label">Type</div>
            </div>
            <div class="cfg-step-line" data-line="1"></div>
            <div class="cfg-step-wrap" onclick="cfgClickStep(2)">
              <div class="cfg-step-dot" data-step="2">3</div>
              <div class="cfg-step-label">Preview</div>
            </div>
            <div class="cfg-step-line" data-line="2"></div>
            <div class="cfg-step-wrap" onclick="cfgClickStep(3)">
              <div class="cfg-step-dot" data-step="3">4</div>
              <div class="cfg-step-label">Outcomes</div>
            </div>
            <div class="cfg-step-line" data-line="3"></div>
            <div class="cfg-step-wrap" onclick="cfgClickStep(4)">
              <div class="cfg-step-dot" data-step="4">5</div>
              <div class="cfg-step-label">Pricing</div>
            </div>
          </div>

          <!-- STEP 1: Venue Input -->
          <div class="cfg-panel active" id="cfgStep0">
            <div class="cfg-tabs">
              <button class="cfg-tab active" onclick="cfgSetTab('dimensions',this)">Enter Dimensions</button>
              <button class="cfg-tab" onclick="cfgSetTab('floorplan',this)">Upload Floor Plan</button>
              <button class="cfg-tab" onclick="cfgSetTab('quick',this)">Quick Estimate</button>
            </div>
            <div id="cfgTabDimensions">
              <div class="cfg-input-group">
                <label><span>Width</span><input type="number" id="cfgWidth" value="30" min="5" max="500" step="1" oninput="cfgUpdatePreview()"></label>
                <label><span>Length</span><input type="number" id="cfgLength" value="20" min="5" max="500" step="1" oninput="cfgUpdatePreview()"></label>
                <label><span>Ceiling Height</span><input type="number" id="cfgHeight" value="3.5" min="2" max="12" step="0.5" oninput="cfgUpdatePreview()"></label>
                <label><span>Units</span>
                  <div class="cfg-unit-toggle">
                    <button class="active" onclick="cfgSetUnit('m',this)">m</button>
                    <button onclick="cfgSetUnit('ft',this)">ft</button>
                  </div>
                </label>
              </div>
              <div class="cfg-preview-area" id="cfgPreviewSvg"></div>
            </div>
            <div id="cfgTabFloorplan" style="display:none;">
              <div class="cfg-fp-canvas-wrap" id="cfgFpWrap">
                <div class="cfg-fp-drop-zone" id="cfgFpDropZone" style="pointer-events:auto; cursor:pointer; z-index:6; position:relative;">
                  <i data-lucide="upload" style="width:40px;height:40px;opacity:0.4;"></i>
                  <span style="font-size:0.875rem;">Drop a floor plan image here or click to upload</span>
                  <span style="font-size:0.6875rem; opacity:0.6;">PNG, JPG, or PDF</span>
                </div>
                <canvas id="cfgFpCanvas" style="z-index:2;"></canvas>
                <input type="file" id="cfgFpInput" accept="image/*,.pdf" style="display:none;" onchange="cfgFpFileSelected(event)">
                <div id="cfgFpOverlay" style="display:none; position:absolute; inset:0; z-index:4; pointer-events:none;">
                  <div style="position:absolute; top:12px; left:50%; transform:translateX(-50%); display:flex; align-items:center; gap:8px; padding:8px 16px; background:rgba(59,130,246,0.9); border-radius:8px; backdrop-filter:blur(8px); white-space:nowrap;">
                    <i data-lucide="ruler" style="width:16px;height:16px;color:white;"></i>
                    <span style="font-size:0.8125rem; font-weight:600; color:white;">Click &amp; drag on the image to draw a reference line</span>
                  </div>
                </div>
              </div>
              <div id="cfgFpToolbar" style="display:none; margin-top:0.75rem; gap:0.75rem; align-items:center;">
                <button class="btn-back" style="padding:0.5rem 1rem; font-size:0.8125rem;" onclick="document.getElementById('cfgFpInput').click()">
                  <i data-lucide="image-plus" style="width:14px;height:14px;"></i> Replace Image
                </button>
                <span style="font-size:0.75rem; color:var(--hs-text-muted);" id="cfgFpStatus">Draw a reference line on any known dimension</span>
              </div>
              <div class="cfg-fp-scale-bar" id="cfgFpScaleBar" style="display:none;">
                <div style="display:flex; align-items:center; gap:0.5rem;">
                  <div style="width:10px;height:3px;background:#3b82f6;border-radius:2px;"></div>
                  <label>Reference line length:</label>
                  <input type="number" id="cfgFpScaleVal" value="10" min="1" max="500" step="0.5" oninput="cfgFpApplyScale()">
                  <span style="font-size:0.75rem; color:var(--hs-text-muted);">meters</span>
                </div>
                <div style="margin-left:auto; display:flex; gap:0.5rem; align-items:center;">
                  <span style="font-size:0.6875rem; color:var(--hs-text-muted);" id="cfgFpDimLabel">—</span>
                  <button class="btn-primary" style="padding:0.375rem 0.75rem; font-size:0.75rem;" onclick="cfgFpConfirm()">Apply Dimensions</button>
                </div>
              </div>
            </div>
            <div id="cfgTabQuick" style="display:none;">
              <div class="cfg-quick-cards">
                <div class="cfg-quick-card" onclick="cfgQuickSelect(this,20,25)">
                  <h4>Small</h4>
                  <p>&le; 500 sqm</p>
                  <p style="margin-top:0.5rem; font-size:0.6875rem; color:var(--hs-text-muted);">Boutique, kiosk, small store</p>
                </div>
                <div class="cfg-quick-card" onclick="cfgQuickSelect(this,40,35)">
                  <h4>Medium</h4>
                  <p>500 &ndash; 2,000 sqm</p>
                  <p style="margin-top:0.5rem; font-size:0.6875rem; color:var(--hs-text-muted);">Supermarket, department store</p>
                </div>
                <div class="cfg-quick-card" onclick="cfgQuickSelect(this,70,50)">
                  <h4>Large</h4>
                  <p>2,000+ sqm</p>
                  <p style="margin-top:0.5rem; font-size:0.6875rem; color:var(--hs-text-muted);">Hypermarket, warehouse, airport</p>
                </div>
              </div>
            </div>
            <div class="cfg-nav">
              <div></div>
              <button class="btn-primary" onclick="cfgNext()">Next <i data-lucide="arrow-right" style="width:14px;height:14px;"></i></button>
            </div>
          </div>

          <!-- STEP 2: Venue Type -->
          <div class="cfg-panel" id="cfgStep1">
            <h3 style="text-align:center; margin-bottom:1.5rem; font-size:1.125rem;">What type of venue is this?</h3>
            <div class="cfg-venue-types">
              <div class="cfg-venue-type" onclick="cfgSelectType(this,'retail')">
                <div class="cfg-vt-icon"><i data-lucide="store" style="width:28px;height:28px;"></i></div>
                <h4>Retail</h4>
                <p>Fashion, electronics, general retail</p>
              </div>
              <div class="cfg-venue-type" onclick="cfgSelectType(this,'grocery')">
                <div class="cfg-vt-icon"><i data-lucide="shopping-cart" style="width:28px;height:28px;"></i></div>
                <h4>Grocery</h4>
                <p>Supermarket, food hall</p>
              </div>
              <div class="cfg-venue-type" onclick="cfgSelectType(this,'museum')">
                <div class="cfg-vt-icon"><i data-lucide="landmark" style="width:28px;height:28px;"></i></div>
                <h4>Museum</h4>
                <p>Gallery, exhibition, cultural</p>
              </div>
              <div class="cfg-venue-type" onclick="cfgSelectType(this,'transit')">
                <div class="cfg-vt-icon"><i data-lucide="train-front" style="width:28px;height:28px;"></i></div>
                <h4>Transit</h4>
                <p>Airport, station, terminal</p>
              </div>
              <div class="cfg-venue-type" onclick="cfgSelectType(this,'office')">
                <div class="cfg-vt-icon"><i data-lucide="building-2" style="width:28px;height:28px;"></i></div>
                <h4>Office</h4>
                <p>Lobby, coworking, campus</p>
              </div>
            </div>
            <div class="cfg-nav">
              <button class="btn-back" onclick="cfgBack()"><i data-lucide="arrow-left" style="width:14px;height:14px;"></i> Back</button>
              <button class="btn-primary" onclick="cfgNext()" id="cfgStep1Next" disabled style="opacity:0.5;cursor:not-allowed;">Next <i data-lucide="arrow-right" style="width:14px;height:14px;"></i></button>
            </div>
          </div>

          <!-- STEP 3: Preview & Results -->
          <div class="cfg-panel" id="cfgStep2">
            <div class="cfg-summary-bar" id="cfgSummaryBar"></div>
            <div class="cfg-results-grid">
              <div>
                <div class="cfg-preview-area" id="cfgResultSvg" style="margin-bottom:1rem;"></div>
                <div class="cfg-3d-wrap" id="cfg3dContainer" style="display:none;">
                  <div class="cfg-3d-toolbar" id="cfg3dToolbar">
                    <button onclick="cfg3dSetView('perspective')" class="active" title="Perspective View">Perspective</button>
                    <button onclick="cfg3dSetView('top')" title="Top View">Top</button>
                    <button onclick="cfg3dSetView('front')" title="Front View">Front</button>
                    <button onclick="cfg3dSetView('side')" title="Side View">Side</button>
                    <div class="cfg-tb-sep"></div>
                    <button onclick="cfg3dSetView('reset')" title="Reset Camera"><i data-lucide="rotate-ccw" style="width:12px;height:12px;"></i></button>
                    <div class="cfg-tb-sep"></div>
                    <button id="cfg3dPanBtn" onclick="cfg3dTogglePan()" title="Toggle Pan Mode"><i data-lucide="move" style="width:12px;height:12px;"></i></button>
                  </div>
                  <div class="cfg-3d-badge">Live Hyperspace 3D Environment &bull; Drag to rotate &bull; Scroll to zoom</div>
                </div>
                <button class="btn-primary" id="cfg3dToggle" onclick="cfgToggle3D()" style="margin-top:0.75rem; font-size:0.8125rem;">
                  <i data-lucide="rotate-3d" style="width:14px;height:14px;"></i> View in 3D
                </button>
              </div>
              <div>
                <div class="cfg-stats" id="cfgStats"></div>
                <div class="cfg-toggle-row">
                  <button class="cfg-toggle-btn active" onclick="cfgSetOptimize('cost',this)">Cost-optimized</button>
                  <button class="cfg-toggle-btn" onclick="cfgSetOptimize('accuracy',this)">Max accuracy</button>
                </div>
                <div class="card-glass" style="padding:1rem; border-radius:12px; margin-top:0.5rem;">
                  <p style="font-size:0.75rem; color:var(--hs-text-muted); line-height:1.6;">
                    <strong style="color:var(--hs-text);">Ulisse LiDAR</strong><br>
                    360&deg; horizontal &bull; 15m range<br>
                    Ceiling-mounted at <span id="cfgMountLabel">3.5</span>m<br>
                    Coverage per unit: ~<span id="cfgCovPerUnit">0</span> sqm
                  </p>
                </div>
              </div>
            </div>
            <div class="cfg-nav">
              <button class="btn-back" onclick="cfgBack()"><i data-lucide="arrow-left" style="width:14px;height:14px;"></i> Back</button>
              <button class="btn-primary" onclick="cfgNext()">Choose Outcomes <i data-lucide="arrow-right" style="width:14px;height:14px;"></i></button>
            </div>
          </div>

          <!-- STEP 4: Outcomes -->
          <div class="cfg-panel" id="cfgStep3">
            <div class="cfg-summary-bar" id="cfgSummaryBar3"></div>
            <h3 style="text-align:center; margin-bottom:0.25rem; font-size:1.125rem;">What do you want to optimize?</h3>
            <p style="text-align:center; font-size:0.8125rem; color:var(--hs-text-muted); margin-bottom:1.25rem;">Select a few — watch the space respond.</p>
            <div class="cfg-outcomes-layout">
              <div>
                <div style="display:flex; align-items:center; justify-content:space-between; margin-bottom:0.75rem;">
                  <span class="cfg-tier-label core" id="cfgTierLabel">Core Plan</span>
                  <button class="cfg-outcomes-reset" onclick="cfgOutcomesReset()"><i data-lucide="rotate-ccw" style="width:10px;height:10px;"></i> Reset to recommended</button>
                </div>
                <div class="cfg-outcomes-grid" id="cfgOutcomesGrid"></div>
                <p class="cfg-outcomes-hint">Simulated trajectories for preview. Real data requires deployment.</p>
              </div>
              <div class="cfg-outcomes-3d" id="cfgOutcomes3d">
                <div class="cfg-o3d-badge" id="cfgO3dBadge">Toggle outcomes to see overlays update live</div>
              </div>
            </div>
            <div class="cfg-nav">
              <button class="btn-back" onclick="cfgBack()"><i data-lucide="arrow-left" style="width:14px;height:14px;"></i> Back</button>
              <button class="btn-primary" onclick="cfgNext()">See Pricing <i data-lucide="arrow-right" style="width:14px;height:14px;"></i></button>
            </div>
          </div>

          <!-- STEP 5: Pricing & Lead Capture -->
          <div class="cfg-panel" id="cfgStep4">
            <div class="cfg-summary-bar" id="cfgSummaryBar2"></div>
            <div style="text-align:center; margin-bottom:1rem;"><span class="cfg-tier-label core" id="cfgPricingTier">Recommended: Core Plan</span></div>
            <div class="cfg-pricing-cards">
              <div class="cfg-price-card selected" onclick="cfgSelectPricing(this,'opex')">
                <div class="cfg-recommended">Recommended</div>
                <div class="cfg-price-tag">Full OPEX</div>
                <div class="cfg-price-amount" id="cfgPriceOpex">$0</div>
                <div class="cfg-price-period">per month</div>
                <div class="cfg-price-sub" style="margin-top:1rem; line-height:1.7;">Includes LiDARs &bull; Full Analytics &bull; Support<br><strong style="color:var(--hs-green);">Zero Capex</strong><br><span id="cfgContractLabel">36-month contract</span></div>
              </div>
              <div class="cfg-price-card" onclick="cfgSelectPricing(this,'hybrid')">
                <div class="cfg-price-tag">Hybrid</div>
                <div class="cfg-price-amount" id="cfgPriceHw">$0</div>
                <div class="cfg-price-period">upfront</div>
                <div style="margin-top:0.75rem;">
                  <span style="font-size:1.25rem; font-weight:700; color:white;" id="cfgPriceHybridMo">$0</span>
                  <span style="font-size:0.8125rem; color:var(--hs-text-muted);"> /month</span>
                </div>
                <div class="cfg-price-sub" style="margin-top:0.75rem; line-height:1.7;">Lower monthly fee &bull; Hardware purchase</div>
              </div>
            </div>
            <div style="text-align:center; margin-bottom:1.5rem;">
              <h3 style="font-size:1.25rem; margin-bottom:0.5rem;">Send Me This Setup</h3>
              <p style="font-size:0.8125rem; color:var(--hs-text-muted);">We'll send you a detailed proposal based on your configuration.</p>
            </div>
            <div class="cfg-lead-form" id="cfgLeadForm">
              <input type="email" id="cfgEmail" placeholder="Work email *" required>
              <input type="text" id="cfgCompany" placeholder="Company (optional)">
              <input type="text" id="cfgRole" placeholder="Your role (optional)">
              <div style="text-align:center; margin-top:0.5rem;">
                <button class="btn-primary" style="padding:0.875rem 2.5rem; font-size:1rem;" onclick="cfgSubmitLead()">
                  <i data-lucide="send" style="width:16px;height:16px;"></i> Send My Configuration
                </button>
              </div>
            </div>
            <div id="cfgLeadSuccess" style="display:none; text-align:center; padding:2rem;">
              <div style="color:var(--hs-green); font-size:1.25rem; font-weight:700; margin-bottom:0.5rem; display:flex; align-items:center; justify-content:center; gap:0.5rem;">
                <i data-lucide="check-circle" style="width:24px;height:24px;flex-shrink:0;"></i>
                Configuration Sent!
              </div>
              <p style="color:var(--hs-text-muted); font-size:0.9375rem;">We'll be in touch within 24 hours with a detailed proposal.</p>
            </div>
            <div class="cfg-nav">
              <button class="btn-back" onclick="cfgBack()"><i data-lucide="arrow-left" style="width:14px;height:14px;"></i> Back</button>
              <div></div>
            </div>
          </div>

        </div>
      </div>
    </section>

    <!-- Video Modal -->
    <div class="video-modal" id="videoModal" onclick="closeVideoModal(event)">
      <div class="video-modal-inner">
        <button class="video-modal-close" onclick="closeVideoModal(event, true)"><i data-lucide="x" style="width:18px;height:18px;"></i></button>
        <video id="modalVideo" controls autoplay style="width:100%;display:block;"></video>
      </div>
    </div>

    <!-- ============ CTA ============ -->
    <section class="cta-section section-alt" id="demo">
      <div class="cta-bg"></div>
      <div class="container" style="position:relative; z-index:10;">
        <div class="reveal" style="max-width:600px; margin:0 auto;">
          <h2 style="font-size:2.75rem; font-weight:900; line-height:1.1; margin-bottom:1.25rem;">Ready to See Your Space <span class="gradient-text">Differently?</span></h2>
          <p style="color:var(--hs-text-muted); font-size:1.0625rem; line-height:1.7; margin-bottom:2.5rem;">Get a personalized demo with your floor plan. See Hyperspace work with your actual venue layout in under 30 minutes.</p>
          <form class="lead-form" id="demoForm" onsubmit="handleDemoSubmit(event)">
            <input type="email" name="email" placeholder="Enter your work email" required>
            <button type="submit" class="btn-primary" style="padding:0.875rem 2rem; font-size:1rem;">
              <i data-lucide="send" style="width:16px;height:16px;"></i> Request Demo
            </button>
          </form>
          <div class="lead-success" id="demoSuccess">
            <i data-lucide="check-circle" style="width:18px;height:18px;flex-shrink:0;"></i>
            Thank you! We'll be in touch within 24 hours.
          </div>
          <p style="color:var(--hs-text-muted); font-size:0.75rem; margin-top:1rem; opacity:0.7;">No spam. We'll only reach out about your demo request.</p>
        </div>
      </div>
    </section>

    <!-- ============ FOOTER ============ -->
    <footer class="site-footer section-dark">
      <div class="footer-grid">
        <div class="footer-brand">
          <a href="#" class="logo" style="display:flex; align-items:center; gap:0.75rem; text-decoration:none;">
            <img src="./hyperspace-logo.png" alt="Hyperspace" style="height:32px; width:32px;">
            <span style="font-size:1.125rem; font-weight:700; color:var(--hs-text);">Hyperspace</span>
          </a>
          <p>The LiDAR-Powered Spatial Intelligence Platform. Transform physical spaces into data-driven experiences.</p>
        </div>
        <div class="footer-col">
          <h4>Product</h4>
          <a href="#">3D Venue Builder</a>
          <a href="#">LiDAR Coverage</a>
          <a href="#">Zone Analytics</a>
          <a href="#">PEBLE&#8482; Attribution</a>
          <a href="#">AI Narrator</a>
        </div>
        <div class="footer-col">
          <h4>Solutions</h4>
          <a href="#">Retail</a>
          <a href="#">Smart Venues</a>
          <a href="#">DOOH &amp; Media</a>
          <a href="#">Airports</a>
          <a href="#">Stadiums</a>
        </div>
        <div class="footer-col">
          <h4>Resources</h4>
          <a href="#">Documentation</a>
          <a href="#">Case Studies</a>
          <a href="#">Blog</a>
          <a href="#">API Reference</a>
          <a href="#">Support</a>
        </div>
      </div>
      <div class="footer-bottom">
        <span>&copy; 2026 Hyperspace. All rights reserved.</span>
        <div style="display:flex; gap:1.5rem;">
          <a href="#" style="color:var(--hs-text-muted); text-decoration:none; font-size:0.8125rem;">Privacy Policy</a>
          <a href="#" style="color:var(--hs-text-muted); text-decoration:none; font-size:0.8125rem;">Terms of Service</a>
        </div>
      </div>
    </footer>

    <!-- ============ SCRIPTS ============ -->
    <script>
      // Initialize Lucide icons
      lucide.createIcons();

      // Scroll reveal
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('visible');
          }
        });
      }, { threshold: 0.1, rootMargin: '0px 0px -50px 0px' });
      document.querySelectorAll('.reveal').forEach(el => observer.observe(el));

      // If page loaded with a hash, immediately reveal elements inside the target
      if (window.location.hash) {
        const target = document.querySelector(window.location.hash);
        if (target) {
          target.querySelectorAll('.reveal').forEach(el => el.classList.add('visible'));
          if (target.classList.contains('reveal')) target.classList.add('visible');
        }
      }

      // Video modal
      function openVideoModal(src) {
        const modal = document.getElementById('videoModal');
        const video = document.getElementById('modalVideo');
        video.src = src;
        modal.classList.add('active');
        document.body.style.overflow = 'hidden';
        video.play();
      }
      function closeVideoModal(e, force) {
        if (force || e.target === document.getElementById('videoModal')) {
          const modal = document.getElementById('videoModal');
          const video = document.getElementById('modalVideo');
          video.pause();
          video.src = '';
          modal.classList.remove('active');
          document.body.style.overflow = '';
        }
      }
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') closeVideoModal(null, true);
      });

      // ===== CONFIGURATOR ENGINE =====
      const CFG = {
        step: 0, maxReached: 0,
        unit: 'm',
        width: 30, length: 20, height: 3.5,
        venueType: null, optimize: 'cost', pricingMode: 'opex',
        lidars: [], coveragePct: 0,
        // LiDAR specs
        LIDAR_RANGE: 15, LIDAR_HFOV: 360, LIDAR_MOUNT_DEFAULT: 3.5,
        // Effective coverage: π × 15² × 0.75 ≈ 530 sqm
        EFFECTIVE_COVERAGE_SQM: 530,
        // Venue-type heuristics (multiplier on lidar_count)
        VENUE_HEURISTIC: { retail: 1.0, grocery: 1.15, museum: 0.9, transit: 1.2, office: 0.85 },
        // Pricing model — margin-based (H/W ≥25%, S/W ≥35%)
        HW_COST: 850,                    // H: hardware cost per LiDAR
        HW_SELL: 1133,                   // Hs: H / (1−0.25) → 25% margin
        SW_COST_MONTHLY: 50,             // S: cloud+AI+ops per LiDAR/mo
        SW_SELL_MONTHLY: 77,             // Ss: S / (1−0.35) → 35% margin
        PLATFORM_FEE: 0,                 // P: optional platform fee
        CONTRACT_MONTHS: 36,             // T: contract length
        // Floor plan state
        fpImage: null, fpLine: null, fpDrawing: false, fpStart: null,
        // Outcomes state
        selectedOutcomes: new Set(),
        recommendedTier: 'core',
        // Tier pricing
        PLATFORM_FEE_CORE: 0,
        PLATFORM_FEE_PRO: 99,
      };

      function cfgToMeters(v) { return CFG.unit === 'ft' ? v * 0.3048 : v; }

      function cfgSetUnit(u, btn) {
        CFG.unit = u;
        btn.parentElement.querySelectorAll('button').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        cfgUpdatePreview();
      }

      function cfgSetTab(tab, btn) {
        document.querySelectorAll('.cfg-tab').forEach(t => t.classList.remove('active'));
        btn.classList.add('active');
        document.getElementById('cfgTabDimensions').style.display = tab === 'dimensions' ? '' : 'none';
        document.getElementById('cfgTabFloorplan').style.display = tab === 'floorplan' ? '' : 'none';
        document.getElementById('cfgTabQuick').style.display = tab === 'quick' ? '' : 'none';
        if (tab === 'floorplan') cfgFpInit();
      }

      function cfgQuickSelect(el, w, l) {
        document.querySelectorAll('.cfg-quick-card').forEach(c => c.classList.remove('selected'));
        el.classList.add('selected');
        document.getElementById('cfgWidth').value = w;
        document.getElementById('cfgLength').value = l;
        CFG.width = w; CFG.length = l;
        cfgUpdatePreview();
      }

      function cfgSelectType(el, type) {
        document.querySelectorAll('.cfg-venue-type').forEach(c => c.classList.remove('selected'));
        el.classList.add('selected');
        CFG.venueType = type;
        const btn = document.getElementById('cfgStep1Next');
        btn.disabled = false;
        btn.style.opacity = '1';
        btn.style.cursor = 'pointer';
      }

      function cfgSelectPricing(el, mode) {
        document.querySelectorAll('.cfg-price-card').forEach(c => c.classList.remove('selected'));
        el.classList.add('selected');
        CFG.pricingMode = mode;
      }

      function cfgSetOptimize(mode, btn) {
        CFG.optimize = mode;
        document.querySelectorAll('.cfg-toggle-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        cfgRunPlacement();
        cfgRenderResults();
      }

      // === STEP NAVIGATION ===
      function cfgGoTo(step) {
        CFG.step = step;
        if (step > CFG.maxReached) CFG.maxReached = step;
        document.querySelectorAll('.cfg-panel').forEach(p => p.classList.remove('active'));
        document.getElementById('cfgStep' + step).classList.add('active');
        // Update progress dots and lines
        document.querySelectorAll('.cfg-step-dot').forEach(d => {
          const s = parseInt(d.dataset.step);
          d.classList.remove('active', 'done');
          if (s === step) d.classList.add('active');
          else if (s < step) d.classList.add('done');
        });
        document.querySelectorAll('.cfg-step-line').forEach(l => {
          const s = parseInt(l.dataset.line);
          l.classList.remove('done', 'active');
          if (s < step) l.classList.add('done');
        });
        lucide.createIcons();
        // Scroll configurator into view
        document.querySelector('.cfg-wrap').scrollIntoView({ behavior:'smooth', block:'start' });
        // Delay rendering until after layout paint (fixes blank SVG on first visit)
        requestAnimationFrame(() => {
          if (step === 2) { cfgRunPlacement(); cfgRenderResults(); }
          if (step === 3) { cfgInitOutcomesStep(); }
          if (step === 4) { cfgComputePricing(); }
        });
      }
      function cfgClickStep(step) {
        // Allow clicking on completed steps or the next reachable step
        if (step <= CFG.maxReached) {
          CFG.width = parseFloat(document.getElementById('cfgWidth').value) || 30;
          CFG.length = parseFloat(document.getElementById('cfgLength').value) || 20;
          CFG.height = parseFloat(document.getElementById('cfgHeight').value) || 3.5;
          cfgGoTo(step);
        }
      }
      function cfgNext() {
        CFG.width = parseFloat(document.getElementById('cfgWidth').value) || 30;
        CFG.length = parseFloat(document.getElementById('cfgLength').value) || 20;
        CFG.height = parseFloat(document.getElementById('cfgHeight').value) || 3.5;
        if (CFG.step < 4) cfgGoTo(CFG.step + 1);
      }
      function cfgBack() { if (CFG.step > 0) cfgGoTo(CFG.step - 1); }

      // === FLOOR PLAN UPLOAD ===
      let cfgFpCtx = null;
      let cfgFpBound = false;
      function cfgFpInit() {
        if (cfgFpBound) return;
        cfgFpBound = true;
        const wrap = document.getElementById('cfgFpWrap');
        const canvas = document.getElementById('cfgFpCanvas');
        const input = document.getElementById('cfgFpInput');
        const dropZone = document.getElementById('cfgFpDropZone');
        // Click drop zone to upload
        dropZone.addEventListener('click', (e) => { e.stopPropagation(); input.click(); });
        // Drag and drop on wrap
        wrap.addEventListener('dragover', (e) => { e.preventDefault(); wrap.style.borderColor = 'var(--hs-blue)'; });
        wrap.addEventListener('dragleave', () => { wrap.style.borderColor = ''; });
        wrap.addEventListener('drop', (e) => {
          e.preventDefault(); wrap.style.borderColor = '';
          if (e.dataTransfer.files.length) cfgFpLoadImage(e.dataTransfer.files[0]);
        });
        // Canvas drawing for reference line
        canvas.addEventListener('mousedown', (e) => {
          if (!CFG.fpImage) return;
          e.preventDefault();
          const rect = canvas.getBoundingClientRect();
          CFG.fpDrawing = true;
          CFG.fpStart = { x: (e.clientX - rect.left) / rect.width * canvas.width, y: (e.clientY - rect.top) / rect.height * canvas.height };
          CFG.fpLine = null;
          document.getElementById('cfgFpOverlay').style.display = 'none';
        });
        canvas.addEventListener('mousemove', (e) => {
          if (!CFG.fpDrawing || !CFG.fpStart) return;
          e.preventDefault();
          const rect = canvas.getBoundingClientRect();
          const ex = (e.clientX - rect.left) / rect.width * canvas.width;
          const ey = (e.clientY - rect.top) / rect.height * canvas.height;
          cfgFpRedraw();
          cfgFpCtx.beginPath();
          cfgFpCtx.moveTo(CFG.fpStart.x, CFG.fpStart.y);
          cfgFpCtx.lineTo(ex, ey);
          cfgFpCtx.strokeStyle = '#3b82f6';
          cfgFpCtx.lineWidth = 3;
          cfgFpCtx.setLineDash([8, 4]);
          cfgFpCtx.stroke();
          cfgFpCtx.setLineDash([]);
          [CFG.fpStart, {x: ex, y: ey}].forEach(pt => {
            cfgFpCtx.beginPath();
            cfgFpCtx.arc(pt.x, pt.y, 6, 0, Math.PI * 2);
            cfgFpCtx.fillStyle = '#3b82f6';
            cfgFpCtx.fill();
            cfgFpCtx.strokeStyle = 'white';
            cfgFpCtx.lineWidth = 2;
            cfgFpCtx.stroke();
          });
        });
        canvas.addEventListener('mouseup', (e) => {
          if (!CFG.fpDrawing || !CFG.fpStart) return;
          CFG.fpDrawing = false;
          const rect = canvas.getBoundingClientRect();
          const ex = (e.clientX - rect.left) / rect.width * canvas.width;
          const ey = (e.clientY - rect.top) / rect.height * canvas.height;
          const dx = ex - CFG.fpStart.x, dy = ey - CFG.fpStart.y;
          const linePx = Math.sqrt(dx * dx + dy * dy);
          if (linePx < 10) { CFG.fpStart = null; cfgFpRedraw(); return; }
          CFG.fpLine = { x1: CFG.fpStart.x, y1: CFG.fpStart.y, x2: ex, y2: ey, px: linePx };
          cfgFpRedraw();
          cfgFpDrawLine();
          document.getElementById('cfgFpScaleBar').style.display = '';
          document.getElementById('cfgFpStatus').textContent = 'Reference line drawn — set the real length below.';
          cfgFpApplyScale();
        });
      }

      function cfgFpFileSelected(e) {
        if (e.target.files.length) cfgFpLoadImage(e.target.files[0]);
      }

      function cfgFpLoadImage(file) {
        const reader = new FileReader();
        reader.onload = (ev) => {
          const img = new Image();
          img.onload = () => {
            CFG.fpImage = img;
            CFG.fpLine = null;
            CFG.fpStart = null;
            const canvas = document.getElementById('cfgFpCanvas');
            const wrap = document.getElementById('cfgFpWrap');
            canvas.width = img.width;
            canvas.height = img.height;
            cfgFpCtx = canvas.getContext('2d');
            cfgFpRedraw();
            wrap.classList.add('has-image');
            document.getElementById('cfgFpDropZone').style.display = 'none';
            document.getElementById('cfgFpOverlay').style.display = '';
            document.getElementById('cfgFpToolbar').style.display = 'flex';
            document.getElementById('cfgFpScaleBar').style.display = 'none';
            document.getElementById('cfgFpStatus').textContent = 'Draw a reference line on any known dimension';
            lucide.createIcons();
          };
          img.src = ev.target.result;
        };
        reader.readAsDataURL(file);
      }

      function cfgFpRedraw() {
        if (!cfgFpCtx || !CFG.fpImage) return;
        const canvas = document.getElementById('cfgFpCanvas');
        cfgFpCtx.clearRect(0, 0, canvas.width, canvas.height);
        cfgFpCtx.drawImage(CFG.fpImage, 0, 0);
      }

      function cfgFpDrawLine() {
        if (!cfgFpCtx || !CFG.fpLine) return;
        const l = CFG.fpLine;
        cfgFpCtx.beginPath();
        cfgFpCtx.moveTo(l.x1, l.y1);
        cfgFpCtx.lineTo(l.x2, l.y2);
        cfgFpCtx.strokeStyle = '#3b82f6';
        cfgFpCtx.lineWidth = 3;
        cfgFpCtx.setLineDash([8, 4]);
        cfgFpCtx.stroke();
        cfgFpCtx.setLineDash([]);
        [{x:l.x1,y:l.y1},{x:l.x2,y:l.y2}].forEach(pt => {
          cfgFpCtx.beginPath();
          cfgFpCtx.arc(pt.x, pt.y, 6, 0, Math.PI * 2);
          cfgFpCtx.fillStyle = '#3b82f6';
          cfgFpCtx.fill();
          cfgFpCtx.strokeStyle = 'white';
          cfgFpCtx.lineWidth = 2;
          cfgFpCtx.stroke();
        });
        // Label
        const mx = (l.x1 + l.x2) / 2, my = (l.y1 + l.y2) / 2;
        const val = document.getElementById('cfgFpScaleVal').value || '?';
        cfgFpCtx.font = 'bold 16px sans-serif';
        cfgFpCtx.fillStyle = '#3b82f6';
        cfgFpCtx.textAlign = 'center';
        cfgFpCtx.fillText(val + 'm', mx, my - 12);
      }

      function cfgFpApplyScale() {
        if (!CFG.fpLine || !CFG.fpImage) return;
        const scaleVal = parseFloat(document.getElementById('cfgFpScaleVal').value) || 10;
        const ppm = CFG.fpLine.px / scaleVal; // pixels per meter
        const imgW = CFG.fpImage.width / ppm;
        const imgH = CFG.fpImage.height / ppm;
        document.getElementById('cfgFpDimLabel').textContent = imgW.toFixed(1) + 'm × ' + imgH.toFixed(1) + 'm (' + (imgW * imgH).toFixed(0) + ' sqm)';
        // Redraw with updated label
        cfgFpRedraw();
        cfgFpDrawLine();
        // Store for confirm
        CFG._fpDimW = imgW;
        CFG._fpDimL = imgH;
      }

      function cfgFpConfirm() {
        if (!CFG._fpDimW) return;
        CFG.width = Math.round(CFG._fpDimW);
        CFG.length = Math.round(CFG._fpDimL);
        document.getElementById('cfgWidth').value = CFG.width;
        document.getElementById('cfgLength').value = CFG.length;
        cfgUpdatePreview();
        // Switch to dimensions tab to show the result
        const dimTab = document.querySelector('.cfg-tab');
        cfgSetTab('dimensions', dimTab);
      }

      // === COVERAGE ALGORITHM ===
      // lidar_count = ceil(venue_area / 530) × venue_heuristic
      // Then grid-place that many LiDARs for visualization
      function cfgRunPlacement() {
        const w = cfgToMeters(CFG.width);
        const l = cfgToMeters(CFG.length);
        const h = cfgToMeters(CFG.height);
        const area = w * l;
        const range = CFG.LIDAR_RANGE;
        // Effective radius: π×15²×0.75 = 530 sqm → r = sqrt(530/π) ≈ 12.99m
        const effectiveRadius = Math.sqrt(CFG.EFFECTIVE_COVERAGE_SQM / Math.PI);
        // LiDAR count: ceil(area / 530) × venue heuristic × optimize factor
        const heuristic = CFG.VENUE_HEURISTIC[CFG.venueType] || 1.0;
        const optimizeFactor = CFG.optimize === 'accuracy' ? 1.3 : 1.0;
        const baseLidarCount = Math.ceil(area / CFG.EFFECTIVE_COVERAGE_SQM);
        const lidarCount = Math.max(1, Math.ceil(baseLidarCount * heuristic * optimizeFactor));
        // Grid-place for visualization — always fill entire grid for even coverage
        const aspect = w / l;
        let cols = Math.round(Math.sqrt(lidarCount * aspect));
        if (cols < 1) cols = 1;
        let rows = Math.ceil(lidarCount / cols);
        // Ensure grid covers the full rectangle (cols * rows >= lidarCount)
        if (cols * rows < lidarCount) cols++;
        const xSpacing = w / cols;
        const zSpacing = l / rows;
        const lidars = [];
        for (let r = 0; r < rows; r++) {
          for (let c = 0; c < cols; c++) {
            lidars.push({
              x: xSpacing * 0.5 + c * xSpacing,
              z: zSpacing * 0.5 + r * zSpacing,
              radius: effectiveRadius
            });
          }
        }
        CFG.lidars = lidars;
        // Cell-based coverage simulation
        const cellSize = 0.5;
        let covered = 0, total = 0;
        for (let cx = cellSize / 2; cx < w; cx += cellSize) {
          for (let cz = cellSize / 2; cz < l; cz += cellSize) {
            total++;
            for (const lid of lidars) {
              const dx = cx - lid.x, dz = cz - lid.z;
              if (Math.sqrt(dx * dx + dz * dz) <= effectiveRadius) { covered++; break; }
            }
          }
        }
        CFG.coveragePct = total > 0 ? (covered / total * 100) : 0;
        CFG.effectiveRadius = effectiveRadius;
        document.getElementById('cfgCovPerUnit').textContent = CFG.EFFECTIVE_COVERAGE_SQM;
        document.getElementById('cfgMountLabel').textContent = h.toFixed(1);
      }

      // === 2D SVG RENDERING ===
      function cfgUpdatePreview() {
        CFG.width = parseFloat(document.getElementById('cfgWidth').value) || 30;
        CFG.length = parseFloat(document.getElementById('cfgLength').value) || 20;
        const w = cfgToMeters(CFG.width);
        const l = cfgToMeters(CFG.length);
        const area = w * l;
        const el = document.getElementById('cfgPreviewSvg');
        const pad = 40;
        const svgW = el.clientWidth || 600;
        const svgH = el.clientHeight || 375;
        const scale = Math.min((svgW - pad * 2) / w, (svgH - pad * 2) / l);
        const rw = w * scale, rl = l * scale;
        const ox = (svgW - rw) / 2, oy = (svgH - rl) / 2;
        el.innerHTML = `<svg viewBox="0 0 ${svgW} ${svgH}" xmlns="http://www.w3.org/2000/svg">
          <rect x="${ox}" y="${oy}" width="${rw}" height="${rl}" fill="#1e293b" stroke="#3b82f6" stroke-width="2" rx="4"/>
          <text x="${svgW/2}" y="${oy + rl/2 - 10}" text-anchor="middle" fill="#94a3b8" font-size="14" font-family="inherit">${w.toFixed(0)}m × ${l.toFixed(0)}m</text>
          <text x="${svgW/2}" y="${oy + rl/2 + 14}" text-anchor="middle" fill="#f8fafc" font-size="18" font-weight="700" font-family="inherit">${area.toFixed(0)} sqm</text>
          <text x="${ox + rw/2}" y="${oy - 10}" text-anchor="middle" fill="#64748b" font-size="11" font-family="inherit">${CFG.width} ${CFG.unit}</text>
          <text x="${ox - 10}" y="${oy + rl/2}" text-anchor="end" fill="#64748b" font-size="11" font-family="inherit" transform="rotate(-90,${ox-10},${oy+rl/2})">${CFG.length} ${CFG.unit}</text>
        </svg>`;
      }

      function cfgRenderResults() {
        const w = cfgToMeters(CFG.width);
        const l = cfgToMeters(CFG.length);
        const area = w * l;
        // Summary bar
        const typeLabel = CFG.venueType ? CFG.venueType.charAt(0).toUpperCase() + CFG.venueType.slice(1) : '—';
        const summaryHtml = `
          <div class="cfg-sb-item"><strong>${w.toFixed(0)}m × ${l.toFixed(0)}m</strong> (${area.toFixed(0)} sqm)</div>
          <div class="cfg-sb-item">Type: <strong>${typeLabel}</strong></div>
          <div class="cfg-sb-item">LiDARs: <strong>${CFG.lidars.length}</strong></div>
          <div class="cfg-sb-item">Coverage: <strong>${CFG.coveragePct.toFixed(1)}%</strong></div>
        `;
        document.getElementById('cfgSummaryBar').innerHTML = summaryHtml;
        if (document.getElementById('cfgSummaryBar2')) document.getElementById('cfgSummaryBar2').innerHTML = summaryHtml;
        if (document.getElementById('cfgSummaryBar3')) document.getElementById('cfgSummaryBar3').innerHTML = summaryHtml;
        // Stats cards
        document.getElementById('cfgStats').innerHTML = `
          <div class="cfg-stat"><div class="cfg-stat-val">${CFG.lidars.length}</div><div class="cfg-stat-lbl">LiDARs Required</div></div>
          <div class="cfg-stat"><div class="cfg-stat-val">${CFG.coveragePct.toFixed(1)}%</div><div class="cfg-stat-lbl">Floor Coverage</div></div>
          <div class="cfg-stat"><div class="cfg-stat-val">${area.toFixed(0)}</div><div class="cfg-stat-lbl">Venue Area (sqm)</div></div>
          <div class="cfg-stat"><div class="cfg-stat-val">${CFG.optimize === 'cost' ? 'Balanced' : 'Max'}</div><div class="cfg-stat-lbl">Overlap Mode</div></div>
        `;
        // 2D SVG with LiDAR positions
        const el = document.getElementById('cfgResultSvg');
        const pad = 40;
        const svgW = el.clientWidth || 600;
        const svgH = el.clientHeight || 375;
        const scale = Math.min((svgW - pad * 2) / w, (svgH - pad * 2) / l);
        const rw = w * scale, rl = l * scale;
        const ox = (svgW - rw) / 2, oy = (svgH - rl) / 2;
        let circles = '', dots = '';
        CFG.lidars.forEach((lid, i) => {
          const cx = ox + lid.x * scale;
          const cy = oy + lid.z * scale;
          const cr = lid.radius * scale;
          circles += `<circle cx="${cx}" cy="${cy}" r="${cr}" fill="rgba(59,130,246,0.08)" stroke="rgba(59,130,246,0.3)" stroke-width="1" stroke-dasharray="4 2"/>`;
          dots += `<circle cx="${cx}" cy="${cy}" r="6" fill="#3b82f6" stroke="white" stroke-width="2"/>`;
          dots += `<text x="${cx}" y="${cy + 18}" text-anchor="middle" fill="#64748b" font-size="9" font-family="inherit">#${i + 1}</text>`;
        });
        el.innerHTML = `<svg viewBox="0 0 ${svgW} ${svgH}" xmlns="http://www.w3.org/2000/svg">
          <rect x="${ox}" y="${oy}" width="${rw}" height="${rl}" fill="#111827" stroke="#334155" stroke-width="1.5" rx="4"/>
          ${circles}${dots}
          <text x="${svgW/2}" y="${svgH - 8}" text-anchor="middle" fill="#475569" font-size="10" font-family="inherit">${w.toFixed(0)}m × ${l.toFixed(0)}m &bull; ${CFG.lidars.length} LiDARs &bull; ${CFG.coveragePct.toFixed(1)}% coverage</text>
        </svg>`;
      }

      // === PRICING ENGINE (official Hyperspace pricing model) ===
      // Sell the space, not the sensor. One visible monthly price per venue.
      // Pricing: Hybrid & Full OPEX yield identical TCV / margins.
      // Never expose: per-LiDAR cost, margins, amortization math.
      function cfgComputePricing() {
        const N = CFG.lidars.length;
        const T = CFG.CONTRACT_MONTHS;
        const Hs = CFG.HW_SELL;           // hardware sell price per unit
        const Ss = CFG.SW_SELL_MONTHLY;    // software sell price per unit/mo
        // Tier-aware platform fee
        const P = CFG.recommendedTier === 'pro' ? CFG.PLATFORM_FEE_PRO : CFG.PLATFORM_FEE_CORE;
        // HYBRID: upfront = N × Hs, monthly = P + N × Ss
        const hybridUpfront = cfgRoundPrice(N * Hs, 100);
        const hybridMonthly = cfgRoundPrice(P + N * Ss);
        // FULL OPEX: same TCV spread over T months
        // Monthly = (N × Hs / T) + P + (N × Ss)
        const opexMonthly = cfgRoundPrice((N * Hs / T) + P + (N * Ss));
        // Update UI
        document.getElementById('cfgPriceOpex').textContent = '$' + opexMonthly.toLocaleString();
        document.getElementById('cfgPriceHw').textContent = '$' + hybridUpfront.toLocaleString();
        document.getElementById('cfgPriceHybridMo').textContent = '$' + hybridMonthly.toLocaleString();
        document.getElementById('cfgContractLabel').textContent = T + '-month contract';
        // Show recommended tier label on pricing step
        var tierEl = document.getElementById('cfgPricingTier');
        if (tierEl) {
          tierEl.className = 'cfg-tier-label ' + CFG.recommendedTier;
          tierEl.textContent = 'Recommended: ' + (CFG.recommendedTier === 'pro' ? 'Pro Plan' : 'Core Plan');
        }
      }
      // Round to clean price: $349 not $347.23
      function cfgRoundPrice(val, step) {
        step = step || 1;
        if (val < 100) return Math.ceil(val);
        if (val < 500) return Math.ceil(val / step) * step;
        if (val < 5000) return Math.ceil(val / 50) * 50;
        return Math.ceil(val / 100) * 100;
      }

      // === 3D PREVIEW (lazy-loaded Three.js) ===
      let cfg3dInitialized = false;
      let cfg3dScene, cfg3dCamera, cfg3dRenderer, cfg3dControls, cfg3dAnimId;
      let cfg3dPeople = [];

      function cfgToggle3D() {
        const container = document.getElementById('cfg3dContainer');
        const svgArea = document.getElementById('cfgResultSvg');
        const toggleBtn = document.getElementById('cfg3dToggle');
        if (container.style.display === 'none') {
          container.style.display = '';
          svgArea.style.display = 'none';
          toggleBtn.innerHTML = '<i data-lucide="layout-grid" style="width:14px;height:14px;"></i> View 2D Plan';
          lucide.createIcons();
          if (!cfg3dInitialized) cfgLoad3D(); else cfgUpdate3DScene();
        } else {
          container.style.display = 'none';
          svgArea.style.display = '';
          toggleBtn.innerHTML = '<i data-lucide="rotate-3d" style="width:14px;height:14px;"></i> View in 3D';
          lucide.createIcons();
        }
      }

      function cfgLoad3D() {
        // Lazy-load Three.js r128 (stable UMD build with examples/js)
        const THREE_VER = '0.128.0';
        const CDN = 'https://unpkg.com/three@' + THREE_VER;
        function on3DReady() {
          // Route to correct initializer based on current step
          if (CFG.step === 3 && typeof cfgInitO3D === 'function') cfgInitO3D();
          else cfgInit3D();
        }
        if (typeof THREE !== 'undefined' && THREE.OrbitControls) { on3DReady(); return; }
        if (typeof THREE !== 'undefined' && !THREE.OrbitControls) {
          const s2 = document.createElement('script');
          s2.src = CDN + '/examples/js/controls/OrbitControls.js';
          s2.onload = () => { console.log('OrbitControls loaded'); on3DReady(); };
          s2.onerror = () => console.error('Failed to load OrbitControls from ' + s2.src);
          document.head.appendChild(s2);
          return;
        }
        const s1 = document.createElement('script');
        s1.src = CDN + '/build/three.min.js';
        s1.onload = () => {
          console.log('Three.js loaded');
          const s2 = document.createElement('script');
          s2.src = CDN + '/examples/js/controls/OrbitControls.js';
          s2.onload = () => { console.log('OrbitControls loaded'); on3DReady(); };
          s2.onerror = () => console.error('Failed to load OrbitControls from ' + s2.src);
          document.head.appendChild(s2);
        };
        s1.onerror = () => console.error('Failed to load Three.js from ' + s1.src);
        document.head.appendChild(s1);
      }

      function cfgInit3D() {
        const container = document.getElementById('cfg3dContainer');
        const w = container.clientWidth;
        const h = container.clientHeight;
        // Scene
        cfg3dScene = new THREE.Scene();
        cfg3dScene.background = new THREE.Color(0x0f0f14);
        // Camera
        cfg3dCamera = new THREE.PerspectiveCamera(60, w / h, 0.1, 500);
        const vw = cfgToMeters(CFG.width), vl = cfgToMeters(CFG.length);
        const maxDim = Math.max(vw, vl);
        cfg3dCamera.position.set(vw * 0.6, maxDim * 0.8, vl * 0.6);
        // Renderer
        cfg3dRenderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        cfg3dRenderer.setSize(w, h);
        cfg3dRenderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        cfg3dRenderer.shadowMap.enabled = true;
        // Remove old canvas if any
        const oldCanvas = container.querySelector('canvas');
        if (oldCanvas) oldCanvas.remove();
        container.appendChild(cfg3dRenderer.domElement);
        // Controls
        cfg3dControls = new THREE.OrbitControls(cfg3dCamera, cfg3dRenderer.domElement);
        cfg3dControls.enableDamping = true;
        cfg3dControls.dampingFactor = 0.05;
        cfg3dControls.target.set(vw / 2, 0, vl / 2);
        cfg3dControls.maxPolarAngle = Math.PI / 2.1;
        // Lighting (from MainViewport.tsx)
        cfg3dScene.add(new THREE.AmbientLight(0xffffff, 0.6));
        const dirLight = new THREE.DirectionalLight(0xffffff, 0.8);
        dirLight.position.set(5, 10, 5);
        dirLight.castShadow = true;
        cfg3dScene.add(dirLight);
        cfg3dInitialized = true;
        cfgUpdate3DScene();
        // Animate
        function animate() {
          cfg3dAnimId = requestAnimationFrame(animate);
          cfg3dControls.update();
          // Animate people
          cfg3dPeople.forEach(p => cfgUpdatePerson(p, vw, vl));
          cfg3dRenderer.render(cfg3dScene, cfg3dCamera);
        }
        animate();
        // Resize observer
        new ResizeObserver(() => {
          const cw = container.clientWidth, ch = container.clientHeight;
          cfg3dCamera.aspect = cw / ch;
          cfg3dCamera.updateProjectionMatrix();
          cfg3dRenderer.setSize(cw, ch);
        }).observe(container);
      }

      function cfgUpdate3DScene() {
        if (!cfg3dScene) return;
        // Clear scene (keep lights)
        const keep = [];
        cfg3dScene.traverse(c => { if (c.isLight) keep.push(c); });
        while (cfg3dScene.children.length) cfg3dScene.remove(cfg3dScene.children[0]);
        keep.forEach(l => cfg3dScene.add(l));
        cfg3dPeople = [];
        const vw = cfgToMeters(CFG.width), vl = cfgToMeters(CFG.length), vh = cfgToMeters(CFG.height);
        // Floor
        const floorGeo = new THREE.PlaneGeometry(vw, vl);
        const floorMat = new THREE.MeshStandardMaterial({ color: 0x1a1a24, roughness: 0.9 });
        const floor = new THREE.Mesh(floorGeo, floorMat);
        floor.rotation.x = -Math.PI / 2;
        floor.position.set(vw / 2, 0, vl / 2);
        floor.receiveShadow = true;
        cfg3dScene.add(floor);
        // Grid
        const grid = new THREE.GridHelper(Math.max(vw, vl) * 1.2, Math.max(vw, vl) * 1.2, 0x333344, 0x222233);
        grid.position.set(vw / 2, 0.01, vl / 2);
        cfg3dScene.add(grid);
        // Walls (from MainViewport COLORS.wall = 0x64748b)
        const wallMat = new THREE.MeshStandardMaterial({ color: 0x64748b, transparent: true, opacity: 0.3, side: THREE.DoubleSide });
        const wallH = vh;
        // 4 walls
        [[vw, wallH, 0, vw/2, wallH/2, 0], [vw, wallH, 0, vw/2, wallH/2, vl],
         [0.1, wallH, vl, 0, wallH/2, vl/2], [0.1, wallH, vl, vw, wallH/2, vl/2]].forEach(([gw,gh,gd,px,py,pz]) => {
          const g = new THREE.BoxGeometry(gw || 0.1, gh, gd || 0.1);
          const m = new THREE.Mesh(g, wallMat);
          m.position.set(px, py, pz);
          cfg3dScene.add(m);
        });
        // LiDARs (ceiling-mounted, from MainViewport COLORS.lidarOnline = 0x22c55e)
        CFG.lidars.forEach(lid => {
          // Cylinder body
          const cGeo = new THREE.CylinderGeometry(0.15, 0.15, 0.3, 16);
          const cMat = new THREE.MeshStandardMaterial({ color: 0x22c55e, emissive: 0x114422 });
          const cMesh = new THREE.Mesh(cGeo, cMat);
          cMesh.position.set(lid.x, vh - 0.15, lid.z);
          cfg3dScene.add(cMesh);
          // Coverage cone (semi-transparent)
          const coneGeo = new THREE.ConeGeometry(lid.radius * 0.6, vh - 0.5, 32, 1, true);
          const coneMat = new THREE.MeshStandardMaterial({ color: 0x3b82f6, transparent: true, opacity: 0.04, side: THREE.DoubleSide });
          const cone = new THREE.Mesh(coneGeo, coneMat);
          cone.position.set(lid.x, (vh - 0.5) / 2, lid.z);
          cfg3dScene.add(cone);
          // Coverage ring on floor
          const ringGeo = new THREE.RingGeometry(lid.radius - 0.1, lid.radius, 64);
          const ringMat = new THREE.MeshBasicMaterial({ color: 0x3b82f6, transparent: true, opacity: 0.15, side: THREE.DoubleSide });
          const ring = new THREE.Mesh(ringGeo, ringMat);
          ring.rotation.x = -Math.PI / 2;
          ring.position.set(lid.x, 0.02, lid.z);
          cfg3dScene.add(ring);
        });
        // Synthetic people — point cloud + wireframe bounding box (from MainViewport.tsx)
        const TRACK_COLORS = [0x3b82f6, 0x8b5cf6, 0x06b6d4, 0x10b981, 0xf59e0b, 0xef4444, 0xec4899, 0x6366f1];
        const numPeople = Math.min(Math.max(3, Math.floor(vw * vl / 80)), 12);
        for (let i = 0; i < numPeople; i++) {
          const personH = 1.5 + Math.random() * 0.4;
          const personR = 0.2 + Math.random() * 0.05;
          const bboxW = personR * 2, bboxD = personR * 2, bboxH = personH;
          const color = TRACK_COLORS[i % TRACK_COLORS.length];
          const px = Math.random() * (vw - 1) + 0.5;
          const pz = Math.random() * (vl - 1) + 0.5;
          const group = new THREE.Group();
          // Point cloud (300 points in capsule volume, ported from MainViewport)
          const pcPositions = cfgGenCapsulePoints(personR, personH, 300);
          const pcGeo = new THREE.BufferGeometry();
          pcGeo.setAttribute('position', new THREE.BufferAttribute(pcPositions, 3));
          const pcMat = new THREE.PointsMaterial({ color: color, size: 0.04, transparent: true, opacity: 0.9, sizeAttenuation: true, depthWrite: false });
          const pointCloud = new THREE.Points(pcGeo, pcMat);
          pointCloud.userData.basePositions = new Float32Array(pcPositions);
          group.add(pointCloud);
          // Wireframe bounding box
          const boxGeo = new THREE.BoxGeometry(bboxW, bboxH, bboxD);
          const edgesGeo = new THREE.EdgesGeometry(boxGeo);
          boxGeo.dispose();
          const wfMat = new THREE.LineBasicMaterial({ color: color, transparent: true, opacity: 0.7 });
          const wireframe = new THREE.LineSegments(edgesGeo, wfMat);
          group.add(wireframe);
          group.position.set(px, bboxH / 2, pz);
          cfg3dScene.add(group);
          // Trail line (starts empty, built as person moves)
          const trailGeo = new THREE.BufferGeometry();
          const trailMat = new THREE.LineBasicMaterial({ color: color, transparent: true, opacity: 0.6 });
          const trailLine = new THREE.Line(trailGeo, trailMat);
          cfg3dScene.add(trailLine);
          cfg3dPeople.push({
            group: group, pointCloud: pointCloud, trail: trailLine,
            trailPts: [{ x: px, z: pz }],
            h: personH, r: personR, color: color,
            x: px, z: pz, tx: Math.random() * vw, tz: Math.random() * vl,
            speed: 0.008 + Math.random() * 0.006,
            pause: 0
          });
        }
      }

      // Generate random 3D points in capsule volume (ported from MainViewport.tsx)
      function cfgGenCapsulePoints(radius, height, count) {
        const positions = new Float32Array(count * 3);
        const halfH = height / 2;
        for (let i = 0; i < count; i++) {
          const i3 = i * 3;
          const t = Math.random();
          let x, y, z;
          if (t < 0.15) {
            const phi = Math.acos(Math.random());
            const theta = Math.random() * Math.PI * 2;
            const r = radius * Math.cbrt(Math.random());
            x = r * Math.sin(phi) * Math.cos(theta);
            z = r * Math.sin(phi) * Math.sin(theta);
            y = -halfH - r * Math.cos(phi);
          } else if (t > 0.85) {
            const phi = Math.acos(Math.random());
            const theta = Math.random() * Math.PI * 2;
            const r = radius * Math.cbrt(Math.random());
            x = r * Math.sin(phi) * Math.cos(theta);
            z = r * Math.sin(phi) * Math.sin(theta);
            y = halfH + r * Math.cos(phi);
          } else {
            const bodyT = (Math.random() - 0.5);
            y = bodyT * height;
            const taper = 1.0 - 0.3 * Math.abs(bodyT * 2);
            const angle = Math.random() * Math.PI * 2;
            const r = radius * taper * Math.sqrt(Math.random());
            x = r * Math.cos(angle);
            z = r * Math.sin(angle);
          }
          positions[i3] = x;
          positions[i3 + 1] = y;
          positions[i3 + 2] = z;
        }
        return positions;
      }

      // Shimmer jitter for point cloud (ported from MainViewport.tsx)
      function cfgJitterPointCloud(points, jitterAmount) {
        jitterAmount = jitterAmount || 0.035;
        const basePositions = points.userData.basePositions;
        if (!basePositions) return;
        const pos = points.geometry.attributes.position;
        const count = pos.count;
        for (let i = 0; i < count; i++) {
          const i3 = i * 3;
          pos.setX(i, basePositions[i3]     + (Math.random() - 0.5) * jitterAmount);
          pos.setY(i, basePositions[i3 + 1] + (Math.random() - 0.5) * jitterAmount);
          pos.setZ(i, basePositions[i3 + 2] + (Math.random() - 0.5) * jitterAmount);
        }
        pos.needsUpdate = true;
      }

      // Person movement + point cloud shimmer + trail update
      function cfgUpdatePerson(p, vw, vl) {
        if (p.pause > 0) { p.pause--; cfgJitterPointCloud(p.pointCloud); return; }
        const dx = p.tx - p.x, dz = p.tz - p.z;
        const dist = Math.sqrt(dx * dx + dz * dz);
        if (dist < 0.5) {
          p.tx = Math.random() * (vw - 1) + 0.5;
          p.tz = Math.random() * (vl - 1) + 0.5;
          if (Math.random() < 0.3) p.pause = 60 + Math.floor(Math.random() * 120);
          return;
        }
        const step = p.speed;
        p.x += (dx / dist) * step;
        p.z += (dz / dist) * step;
        p.group.position.set(p.x, p.h / 2, p.z);
        // Shimmer jitter on point cloud
        cfgJitterPointCloud(p.pointCloud);
        // Update trail (floor-level path)
        p.trailPts.push({ x: p.x, z: p.z });
        if (p.trailPts.length > 200) p.trailPts.shift();
        if (p.trailPts.length > 1) {
          const pts = p.trailPts.map(pt => new THREE.Vector3(pt.x, 0.02, pt.z));
          p.trail.geometry.dispose();
          const newGeo = new THREE.BufferGeometry().setFromPoints(pts);
          p.trail.geometry = newGeo;
        }
      }

      // === 3D CAMERA PRESETS (matching MainViewport) ===
      function cfg3dSetView(preset) {
        if (!cfg3dCamera || !cfg3dControls) return;
        const vw = cfgToMeters(CFG.width), vl = cfgToMeters(CFG.length), vh = cfgToMeters(CFG.height);
        const cx = vw / 2, cz = vl / 2;
        const maxDim = Math.max(vw, vl);
        // Update toolbar active button
        document.querySelectorAll('.cfg-3d-toolbar button').forEach(b => b.classList.remove('active'));
        const views = {
          perspective: () => { cfg3dCamera.position.set(vw * 0.8, maxDim * 0.7, vl * 0.8); cfg3dControls.target.set(cx, 0, cz); },
          top: () => { cfg3dCamera.position.set(cx, maxDim * 1.5, cz + 0.01); cfg3dControls.target.set(cx, 0, cz); },
          front: () => { cfg3dCamera.position.set(cx, vh * 0.5, vl + maxDim * 0.8); cfg3dControls.target.set(cx, vh * 0.5, cz); },
          side: () => { cfg3dCamera.position.set(vw + maxDim * 0.8, vh * 0.5, cz); cfg3dControls.target.set(cx, vh * 0.5, cz); },
          reset: () => { cfg3dCamera.position.set(vw * 0.8, maxDim * 0.7, vl * 0.8); cfg3dControls.target.set(cx, 0, cz); },
        };
        if (views[preset]) views[preset]();
        cfg3dControls.update();
        // Highlight active button
        const btns = document.querySelectorAll('.cfg-3d-toolbar button');
        btns.forEach(b => { if (b.textContent.trim().toLowerCase() === preset) b.classList.add('active'); });
      }

      let cfg3dPanMode = false;
      function cfg3dTogglePan() {
        if (!cfg3dControls) return;
        cfg3dPanMode = !cfg3dPanMode;
        const btn = document.getElementById('cfg3dPanBtn');
        if (cfg3dPanMode) {
          cfg3dControls.mouseButtons = { LEFT: THREE.MOUSE.PAN, MIDDLE: THREE.MOUSE.DOLLY, RIGHT: THREE.MOUSE.ROTATE };
          btn.classList.add('active');
        } else {
          cfg3dControls.mouseButtons = { LEFT: THREE.MOUSE.ROTATE, MIDDLE: THREE.MOUSE.DOLLY, RIGHT: THREE.MOUSE.PAN };
          btn.classList.remove('active');
        }
      }

      // === OUTCOMES REGISTRY (consumed by outcomes.js) ===
      var OUTCOMES_REGISTRY = {
        retail: [
          { id:'people_count', label:'People Count', desc:'Total visitors by zone and time', tier:'base', icon:'users', overlay:'gate_counters', defaultOn:true },
          { id:'hot_zones', label:'Hot Zones', desc:'Heatmap of most-visited areas', tier:'base', icon:'flame', overlay:'heatmap3d', defaultOn:true },
          { id:'dwell_time', label:'Dwell by Area', desc:'Time spent in each zone', tier:'base', icon:'clock', overlay:'dwell_rings', defaultOn:true },
          { id:'conversion_proxy', label:'Conversion Signals', desc:'Entry-to-zone engagement ratio', tier:'advanced', icon:'trending-up', overlay:'funnel' },
          { id:'queue_congestion', label:'Queue & Congestion', desc:'Wait times and bottleneck alerts', tier:'advanced', icon:'alarm-clock', overlay:'queue_people' },
          { id:'campaign_impact', label:'Campaign Impact', desc:'Before/after traffic comparison', tier:'advanced', icon:'bar-chart-3', overlay:'split_compare' },
        ],
        grocery: [
          { id:'people_count', label:'People Count', desc:'Shopper volume by aisle and hour', tier:'base', icon:'users', overlay:'gate_counters', defaultOn:true },
          { id:'flow_paths', label:'Flow Paths', desc:'Most common shopper journeys', tier:'base', icon:'git-branch', overlay:'directed_flow', defaultOn:true },
          { id:'dwell_time', label:'Dwell by Area', desc:'Shelf engagement and browse time', tier:'base', icon:'clock', overlay:'dwell_rings', defaultOn:true },
          { id:'queue_congestion', label:'Queue & Congestion', desc:'Checkout wait and lane alerts', tier:'advanced', icon:'alarm-clock', overlay:'queue_people' },
          { id:'zone_attractiveness', label:'Zone Attraction', desc:'Which aisles pull traffic', tier:'advanced', icon:'magnet', overlay:'gravity_wells' },
          { id:'staff_density', label:'Staff vs Guests', desc:'Staff-to-customer density', tier:'advanced', icon:'user-check', overlay:'two_groups' },
        ],
        transit: [
          { id:'passenger_flow', label:'Passenger Flow', desc:'Movement through gates', tier:'base', icon:'footprints', overlay:'directed_flow', defaultOn:true },
          { id:'occupancy_zone', label:'Zone Occupancy', desc:'Real-time count by area', tier:'base', icon:'users', overlay:'zone_polygons', defaultOn:true },
          { id:'queue_congestion', label:'Queue & Congestion', desc:'Security and boarding queues', tier:'advanced', icon:'alarm-clock', overlay:'queue_people', defaultOn:true },
          { id:'bottleneck', label:'Bottleneck Detection', desc:'Auto-identified chokepoints', tier:'advanced', icon:'alert-triangle', overlay:'bottleneck' },
          { id:'safety_density', label:'Safety Density', desc:'Crowd density alerts', tier:'advanced', icon:'shield', overlay:'density_alert' },
        ],
        office: [
          { id:'occupancy', label:'Occupancy', desc:'People present by floor/zone', tier:'base', icon:'users', overlay:'zone_polygons', defaultOn:true },
          { id:'utilization', label:'Space Utilization', desc:'Actual use vs capacity', tier:'base', icon:'layout', overlay:'capacity_bars', defaultOn:true },
          { id:'peak_times', label:'Peak Times', desc:'Busiest hours by zone', tier:'base', icon:'trending-up', overlay:'heatmap3d', defaultOn:true },
          { id:'anomaly', label:'Anomaly Detection', desc:'Unusual patterns flagged', tier:'advanced', icon:'search', overlay:'spotlight' },
          { id:'energy_proxy', label:'Energy Proxy', desc:'Occupancy-linked HVAC hints', tier:'advanced', icon:'zap', overlay:'thermal' },
        ],
        museum: [
          { id:'visitor_flow', label:'Visitor Flow', desc:'Movement through galleries', tier:'base', icon:'footprints', overlay:'directed_flow', defaultOn:true },
          { id:'exhibit_dwell', label:'Exhibit Dwell', desc:'Time at each exhibit', tier:'base', icon:'image', overlay:'dwell_rings', defaultOn:true },
          { id:'congestion', label:'Congestion Hotspots', desc:'Overcrowded gallery alerts', tier:'advanced', icon:'alarm-clock', overlay:'density_alert', defaultOn:true },
          { id:'path_preference', label:'Path Preference', desc:'Most vs least popular routes', tier:'advanced', icon:'map', overlay:'thick_paths' },
        ],
      };

      // === LEAD CAPTURE ===
      const API_BASE = window.location.hostname === 'localhost' ? 'http://localhost:3002' : '';

      async function cfgSubmitLead() {
        const email = document.getElementById('cfgEmail').value;
        if (!email || !email.includes('@')) { document.getElementById('cfgEmail').style.borderColor = '#ef4444'; return; }
        const payload = {
          email,
          company: document.getElementById('cfgCompany').value || '',
          role: document.getElementById('cfgRole').value || '',
          venue: { width: CFG.width, length: CFG.length, height: CFG.height, unit: CFG.unit, type: CFG.venueType },
          result: { lidars: CFG.lidars.length, coveragePct: CFG.coveragePct, optimize: CFG.optimize, pricingMode: CFG.pricingMode },
          outcomes: Array.from(CFG.selectedOutcomes),
          recommendedPlan: CFG.recommendedTier,
          ts: new Date().toISOString()
        };
        // Save locally as backup
        const leads = JSON.parse(localStorage.getItem('hs_config_leads') || '[]');
        leads.push(payload);
        localStorage.setItem('hs_config_leads', JSON.stringify(leads));
        // Send to backend (Resend)
        const btn = document.querySelector('#cfgLeadForm .btn-primary');
        const origHTML = btn.innerHTML;
        btn.innerHTML = '<i data-lucide="loader" style="width:16px;height:16px;animation:spin 1s linear infinite;"></i> Sending...';
        btn.disabled = true;
        try {
          const resp = await fetch(`${API_BASE}/api/leads/configurator`, {
            method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload)
          });
          if (!resp.ok) throw new Error('Send failed');
          console.log('Configurator lead sent:', payload);
          document.getElementById('cfgLeadForm').style.display = 'none';
          document.getElementById('cfgLeadSuccess').style.display = '';
        } catch (err) {
          console.error('Email send error:', err);
          // Still show success since we saved locally
          document.getElementById('cfgLeadForm').style.display = 'none';
          document.getElementById('cfgLeadSuccess').style.display = '';
        } finally {
          btn.innerHTML = origHTML;
          btn.disabled = false;
        }
      }

      // Init preview on load
      setTimeout(() => cfgUpdatePreview(), 100);

      // Demo lead form
      async function handleDemoSubmit(e) {
        e.preventDefault();
        const form = e.target;
        const email = form.email.value;
        // Save locally as backup
        const leads = JSON.parse(localStorage.getItem('hs_leads') || '[]');
        leads.push({ email, ts: new Date().toISOString() });
        localStorage.setItem('hs_leads', JSON.stringify(leads));
        // Send to backend (Resend)
        const btn = form.querySelector('.btn-primary');
        const origHTML = btn.innerHTML;
        btn.innerHTML = '<i data-lucide="loader" style="width:16px;height:16px;animation:spin 1s linear infinite;"></i> Sending...';
        btn.disabled = true;
        try {
          const resp = await fetch(`${API_BASE}/api/leads/demo`, {
            method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ email })
          });
          if (!resp.ok) throw new Error('Send failed');
          console.log('Demo request sent:', email);
        } catch (err) {
          console.error('Email send error:', err);
        } finally {
          btn.innerHTML = origHTML;
          btn.disabled = false;
          form.style.display = 'none';
          document.getElementById('demoSuccess').classList.add('show');
        }
      }
    </script>
    <script src="./outcomes.js"></script>

  </body>
</html>
